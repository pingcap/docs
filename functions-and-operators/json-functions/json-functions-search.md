---
title: JSON å‡½æ•°ç”¨äºæœç´¢ JSON å€¼
summary: äº†è§£ç”¨äºæœç´¢ JSON å€¼çš„ JSON å‡½æ•°ã€‚
---

# JSON å‡½æ•°ç”¨äºæœç´¢ JSON å€¼

æœ¬æ–‡æ¡£æè¿°äº†ç”¨äºæœç´¢ JSON å€¼çš„ JSON å‡½æ•°ã€‚

## [JSON_CONTAINS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains)

é€šè¿‡è¿”å› `1` æˆ– `0`ï¼Œ`JSON_CONTAINS(json_doc, candidate [,path])` å‡½æ•°æŒ‡ç¤ºç»™å®šçš„ `candidate` JSON æ–‡æ¡£æ˜¯å¦åŒ…å«åœ¨ç›®æ ‡ JSON æ–‡æ¡£ä¸­ã€‚

ç¤ºä¾‹ï¼š

è¿™é‡Œ `a` è¢«åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('["a","b","c"]','"a"');
```

```
+--------------------------------------+
| JSON_CONTAINS('["a","b","c"]','"a"') |
+--------------------------------------+
|                                    1 |
+--------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œ `e` ä¸åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('["a","b","c"]','"e"');
```

```
+--------------------------------------+
| JSON_CONTAINS('["a","b","c"]','"e"') |
+--------------------------------------+
|                                    0 |
+--------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œ `{"foo": "bar"}` è¢«åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','{"foo": "bar"}');
```

```
+------------------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','{"foo": "bar"}') |
+------------------------------------------------------------+
|                                                          1 |
+------------------------------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œ `"bar"` ä¸åœ¨ç›®æ ‡æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"');
```

```
+---------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"') |
+---------------------------------------------------+
|                                                 0 |
+---------------------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œ `"bar"` è¢«åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£çš„ `$.foo` å±æ€§ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"', '$.foo');
```

```
+------------------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"', '$.foo') |
+------------------------------------------------------------+
|                                                          1 |
+------------------------------------------------------------+
1 è¡Œç»“æœ
```

## [JSON_CONTAINS_PATH()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains-path)

`JSON_CONTAINS_PATH(json_doc, all_or_one, path [,path, ...])` å‡½æ•°è¿”å› `0` æˆ– `1`ï¼ŒæŒ‡ç¤º JSON æ–‡æ¡£æ˜¯å¦åœ¨ç»™å®šè·¯å¾„æˆ–è·¯å¾„é›†åˆä¸­åŒ…å«æ•°æ®ã€‚

ç¤ºä¾‹ï¼š

è¿™é‡Œæ–‡æ¡£åŒ…å« `$.foo`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo');
```

```
+--------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo') |
+--------------------------------------------------------------+
|                                                            1 |
+--------------------------------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œæ–‡æ¡£ä¸åŒ…å« `$.bar`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.bar');
```

```
+--------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.bar') |
+--------------------------------------------------------------+
|                                                            0 |
+--------------------------------------------------------------+
1 è¡Œç»“æœ
```

è¿™é‡Œæ–‡æ¡£åŒæ—¶åŒ…å« `$.foo` å’Œ `$.aaa`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo', '$.aaa');
```

```
+-----------------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo', '$.aaa') |
+-----------------------------------------------------------------------+
|                                                                     1 |
+-----------------------------------------------------------------------+
1 è¡Œç»“æœ
```

## [JSON_EXTRACT()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-extract)

`JSON_EXTRACT(json_doc, path[, path] ...)` å‡½æ•°ä» JSON æ–‡æ¡£ä¸­æå–æ•°æ®ï¼Œé€‰æ‹©åŒ¹é… `path` å‚æ•°çš„éƒ¨åˆ†ã€‚

```sql
SELECT JSON_EXTRACT('{"foo": "bar", "aaa": 5}', '$.foo');
```

```
+---------------------------------------------------+
| JSON_EXTRACT('{"foo": "bar", "aaa": 5}', '$.foo') |
+---------------------------------------------------+
| "bar"                                             |
+---------------------------------------------------+
1 è¡Œç»“æœ
```

## [->](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_json-column-path)

`column->path` å‡½æ•°è¿”å› `column` ä¸­åŒ¹é… `path` å‚æ•°çš„æ•°æ®ã€‚å®ƒæ˜¯ [`JSON_EXTRACT()`](#json_extract) çš„åˆ«åã€‚

```sql
SELECT
    j->'$.foo',
    JSON_EXTRACT(j, '$.foo')
FROM (
    SELECT
        '{"foo": "bar", "aaa": 5}' AS j
    ) AS tbl;
```

```
+------------+--------------------------+
| j->'$.foo' | JSON_EXTRACT(j, '$.foo') |
+------------+--------------------------+
| "bar"      | "bar"                    |
+------------+--------------------------+
1 è¡Œç»“æœ
```

## [->>](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_json-inline-path)

`column->>path` å‡½æ•°å¯¹åŒ¹é… `path` å‚æ•°çš„æ•°æ®è¿›è¡Œå»å¼•å·å¤„ç†ã€‚å®ƒæ˜¯ `JSON_UNQUOTE(JSON_EXTRACT(doc, path_literal))` çš„åˆ«åã€‚

```sql
SELECT
    j->'$.foo',
    JSON_EXTRACT(j, '$.foo'),
    j->>'$.foo',
    JSON_UNQUOTE(JSON_EXTRACT(j, '$.foo'))
FROM (
    SELECT
        '{"foo": "bar", "aaa": 5}' AS j
    ) AS tbl;
```

```
+------------+--------------------------+-------------+----------------------------------------+
| j->'$.foo' | JSON_EXTRACT(j, '$.foo') | j->>'$.foo' | JSON_UNQUOTE(JSON_EXTRACT(j, '$.foo')) |
+------------+--------------------------+-------------+----------------------------------------+
| "bar"      | "bar"                    | bar         | bar                                    |
+------------+--------------------------+-------------+----------------------------------------+
1 è¡Œç»“æœ
```

## [JSON_KEYS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-keys)

`JSON_KEYS(json_doc [,path])` å‡½æ•°è¿”å› JSON å¯¹è±¡çš„é¡¶å±‚é”®ï¼Œä½œä¸º JSON æ•°ç»„ã€‚å¦‚æœæä¾› `path` å‚æ•°ï¼Œåˆ™è¿”å›æ‰€é€‰è·¯å¾„çš„é¡¶å±‚é”®ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹è¿”å› JSON æ–‡æ¡£ä¸­çš„ä¸¤ä¸ªé¡¶å±‚é”®ã€‚

```sql
SELECT JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}');
```

```
+---------------------------------------------------------------------------+
| JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}') |
+---------------------------------------------------------------------------+
| ["name", "type"]                                                          |
+---------------------------------------------------------------------------+
1 è¡Œç»“æœ
```

ä»¥ä¸‹ç¤ºä¾‹è¿”å› JSON æ–‡æ¡£ä¸­ `$.name` è·¯å¾„ä¸‹çš„é¡¶å±‚é”®ã€‚

```sql
SELECT JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}', '$.name');
```

```
+-------------------------------------------------------------------------------------+
| JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}', '$.name') |
+-------------------------------------------------------------------------------------+
| ["first", "last"]                                                                   |
+-------------------------------------------------------------------------------------+
1 è¡Œç»“æœ
```

## [JSON_SEARCH()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-search)

`JSON_SEARCH(json_doc, one_or_all, str)` å‡½æ•°åœ¨ JSON æ–‡æ¡£ä¸­æœç´¢å­—ç¬¦ä¸²çš„ä¸€ä¸ªæˆ–æ‰€æœ‰åŒ¹é…ã€‚

ç¤ºä¾‹ï¼š

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥æœç´¢ `cc` çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå®ƒåœ¨ `a` æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ä¸º 2ã€‚

```sql
SELECT JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','one','cc');
```

```
+------------------------------------------------------------------------+
| JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','one','cc') |
+------------------------------------------------------------------------+
| "$.a[2]"                                                               |
+------------------------------------------------------------------------+
1 è¡Œç»“æœ
```

ç°åœ¨ä½ å¯ä»¥å°† `one_or_all` è®¾ç½®ä¸º `all`ï¼Œä»¥è·å–æ‰€æœ‰åŒ¹é…ç»“æœï¼Œè€Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªã€‚

```sql
SELECT JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','all','cc');
```

```
+------------------------------------------------------------------------+
| JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','all','cc') |
+------------------------------------------------------------------------+
| ["$.a[2]", "$.b[0]"]                                                   |
+------------------------------------------------------------------------+
1 è¡Œç»“æœ
```

## [MEMBER OF()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_member-of)

`str MEMBER OF (json_array)` å‡½æ•°æµ‹è¯• `str` æ˜¯å¦æ˜¯ `json_array` çš„å…ƒç´ ï¼Œè‹¥æ˜¯åˆ™è¿”å› `1`ï¼Œå¦åˆ™è¿”å› `0`ã€‚å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œåˆ™è¿”å› `NULL`ã€‚

```sql
SELECT 'ğŸ' MEMBER OF ('["ğŸ","ğŸ¥¥","ğŸ¥­"]') AS 'Contains pineapple';
```

```
+--------------------+
| Contains pineapple |
+--------------------+
|                  1 |
+--------------------+
1 è¡Œç»“æœ
```

## [JSON_OVERLAPS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-overlaps)

`JSON_OVERLAPS(json_doc, json_doc)` å‡½æ•°æŒ‡ç¤ºä¸¤ä¸ª JSON æ–‡æ¡£æ˜¯å¦å­˜åœ¨é‡å éƒ¨åˆ†ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› `1`ï¼›å¦åˆ™è¿”å› `0`ã€‚å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œåˆ™è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºæ²¡æœ‰é‡å ï¼Œå› ä¸ºæ•°ç»„å€¼çš„å…ƒç´ ä¸ªæ•°ä¸åŒã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust"]}'
) AS 'Overlaps';
```

```
+----------+
| Overlaps |
+----------+
|        0 |
+----------+
1 è¡Œç»“æœ
```

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºä¸¤ä¸ª JSON æ–‡æ¡£å­˜åœ¨é‡å ï¼Œå› ä¸ºå®ƒä»¬å®Œå…¨ç›¸åŒã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust","C#"]}'
) AS 'Overlaps';
```

```
+----------+
| Overlaps |
+----------+
|        1 |
+----------+
1 è¡Œç»“æœ
```

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå­˜åœ¨é‡å ï¼Œç¬¬äºŒä¸ªæ–‡æ¡£å¤šäº†ä¸€ä¸ªå±æ€§ã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust","C#"], "arch": ["arm64"]}'
) AS 'Overlaps';
```

```
+----------+
| Overlaps |
+----------+
|        1 |
+----------+
1 è¡Œç»“æœ
```

## å¦è¯·å‚è§

- [JSON Functions Overview](/functions-and-operators/json-functions.md)
- [JSON Data Type](/data-type-json.md)