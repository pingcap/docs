---
title: TiDB Dashboard Cluster Diagnostic Page
summary: TiDBダッシュボードのクラスタ診断機能は、クラスタの問題を診断し、結果をWebページにまとめます。ダッシュボードまたはブラウザからこのページにアクセスできます。指定した期間の診断レポートと比較レポートを生成します。履歴レポートも利用可能です。
---

# TiDBダッシュボードのクラスタ診断ページ {#tidb-dashboard-cluster-diagnostics-page}

TiDBダッシュボードのクラスタ診断機能は、指定された時間範囲内でクラスタに存在する可能性のある問題を診断し、診断結果とクラスタ関連の負荷監視情報を診断レポートにまとめます。この診断レポートはウェブページ形式で提供されます。ブラウザからページを保存した後、オフラインでページを閲覧したり、このページのリンクを配布したりできます。

> **注記：**
>
> クラスター診断機能は、クラスターにデプロイされたPrometheusに依存します。この監視コンポーネントのデプロイ方法の詳細については、 [TiUP](/tiup/tiup-overview.md)デプロイメントドキュメントをご覧ください。クラスターに監視コンポーネントがデプロイされていない場合、生成される診断レポートには失敗が表示されます。

## ページにアクセスする {#access-the-page}

クラスター診断ページにアクセスするには、次のいずれかの方法を使用できます。

-   TiDB ダッシュボードにログインしたら、左側のナビゲーション メニューで**[クラスタ診断]**をクリックします。

    ![Access Cluster Diagnostics page](/media/dashboard/dashboard-diagnostics-access-v650.png)

-   ブラウザで`http://127.0.0.1:2379/dashboard/#/diagnose`アクセスしてください。3 `127.0.0.1:2379`実際のPDアドレスとポート番号に置き換えてください。

## 診断レポートを生成する {#generate-diagnostic-report}

指定された時間範囲内でクラスターを診断し、クラスターの負荷を確認するには、次の手順に従って診断レポートを生成します。

1.  **範囲開始時刻を**`2022-05-21 14:40:00`などに設定します。
2.  **範囲期間を**`10 min`などに設定します。
3.  **[スタート]**をクリックします。

![Generate diagnostic report](/media/dashboard/dashboard-diagnostics-gen-report-v650.png)

> **注記：**
>
> レポートの**範囲期間は**1分から60分の範囲にすることをお勧めします。**範囲期間は**60分を超えることはできません。

上記の手順により、 `2022-05-21 14:40:00`から`2022-05-21 14:50:00`の時間範囲の診断レポートが生成されます。 **「開始」**をクリックすると、以下のインターフェースが表示されます。 **「進行状況」**は診断レポートの進行状況バーです。レポートが生成されたら、 **「完全なレポートをビュー」を**クリックしてください。

![Report progress](/media/dashboard/dashboard-diagnostics-gen-process-v650.png)

## 比較レポートを生成する {#generate-comparison-report}

特定の時点でシステム例外が発生した場合（例えば、QPSジッターやレイテンシーの上昇など）、診断レポートを生成できます。このレポートでは、異常な時間帯のシステムと正常な時間帯のシステムを比較します。例えば、

-   異常時間範囲: `2022-05-21 14:40:00` - `2022-05-21 14:45:00`この時間範囲内では、システムは異常です。
-   正常な時間範囲: `2022-05-21 14:30:00` - `2022-05-21 14:35:00`この時間範囲内では、システムは正常です。

前の 2 つの時間範囲の比較レポートを生成するには、次の手順に従います。

1.  システムが異常になる範囲の開始時刻である「**範囲開始時刻」** （例： `2022-05-21 14:40:00` ）を設定します。
2.  **範囲期間**を設定します。通常、この期間はシステム異常の継続時間（5分など）です。
3.  **ベースラインによる比較を**有効にします。
4.  **ベースライン範囲開始時刻**を設定します。これは、システムが正常である範囲（比較対象）の開始時刻（ `2022-05-21 14:30:00`など）です。
5.  **[スタート]**をクリックします。

![Generate comparison report](/media/dashboard/dashboard-diagnostics-gen-compare-report-v650.png)

次に、レポートが生成されるのを待って、 **「完全なレポートをビュー」を**クリックします。

さらに、診断レポートのメインページのリストには、過去の診断レポートが表示されます。クリックすると、これらの過去のレポートを直接表示できます。
