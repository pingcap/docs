---
title: tidb v5.0.1 Release Notes
category: Releases
aliases: ['/docs/dev/releases/v5.0.1/']
---

# tidb v5.0.1 Release Notes

Release date: April 19, 2021

TiDB version: v5.0.1

## Bug Fixes

+ TiDB

    - Donot prune all columns for Projection [#24093](https://github.com/pingcap/tidb/pull/24093)
    - Fix wrong query result when column contains null values [#24063](https://github.com/pingcap/tidb/pull/24063)
    - Do not build MPP plan for scan with virtual columns [#24058](https://github.com/pingcap/tidb/pull/24058)
    - Fix wrong PointGet / TableDual plan reused in plan cache [#24043](https://github.com/pingcap/tidb/pull/24043)
    - Append common handle columns into the schema of index merge table plan [#24042](https://github.com/pingcap/tidb/pull/24042)
    - Fix type merge about bit type. [#24027](https://github.com/pingcap/tidb/pull/24027)
    - Planner: fix wrong TableDual plans caused by comparing Binary and Bytes incorrectly [#23918](https://github.com/pingcap/tidb/pull/23918)
    - Planner: fix the issue that planner hints don't work in some batch/point-get plans [#23685](https://github.com/pingcap/tidb/pull/23685)

+ TiFlash

    - Fix a potential issue that the DeleteRange in the storage engine failed to remove some data. [#1790](https://github.com/pingcap/tics/pull/1790)
    - Fix problem that TiFlash coprocessor's cast time as int function may produce incorrect result. [#1786](https://github.com/pingcap/tics/pull/1786)
    - Fix the bug that receiver cannot find tasks within 10s. [#1784](https://github.com/pingcap/tics/pull/1784)
    - Fix potential invalid iterator in cancelMPPQuery [#1777](https://github.com/pingcap/tics/pull/1777)
    - Fix problem that behavior of TiFlash coprocessor's bitwise operator is different from TiDB [#1774](https://github.com/pingcap/tics/pull/1774)
    - Fix false alert of overlapped ranges if prefix next key is used [#1771](https://github.com/pingcap/tics/pull/1771)
    - Fix the problem that TiFlash coprocessor's cast string as int function may produce incorrect result. [#1768](https://github.com/pingcap/tics/pull/1768)
    - Fix the issue that continuous and fast writing may make TiFlash OOM [#1739](https://github.com/pingcap/tics/pull/1739)
    - Fix bug that duplicated column name will make TiFlash throw error. [#1732](https://github.com/pingcap/tics/pull/1732)
    - Support complex query plan tree with a max depth of 100. [#1722](https://github.com/pingcap/tics/pull/1722)
    - Fix potential NPE in schema sync service when database is dropped between GC and getting the database info. [#1708](https://github.com/pingcap/tics/pull/1708)
    - Fix the crash that causes by applying Raft commands to dropped tables [#1702](https://github.com/pingcap/tics/pull/1702)
    - Fix the issue that TiFlash may panic during br restore [#1698](https://github.com/pingcap/tics/pull/1698)

## Others

+ TiDB

    - Ddl: fix the covert job to rollingback job [#24080](https://github.com/pingcap/tidb/pull/24080)
    - `Fix performance regression of point select.` [#24070](https://github.com/pingcap/tidb/pull/24070)
    - Fix range building for binary literal [#24041](https://github.com/pingcap/tidb/pull/24041)
    - Fix wrong results for in clause. [#24023](https://github.com/pingcap/tidb/pull/24023)
    - Users now need both Insert and Delete privileges on a table to perform REPLACE. [#23939](https://github.com/pingcap/tidb/pull/23939)
    - Fix some string function get wrong result [#23879](https://github.com/pingcap/tidb/pull/23879)

+ TiKV

    - Fix IN expr(coprocessor) didn't handle unsigned/signed int properly [#10018](https://github.com/tikv/tikv/pull/10018)
    - Fix the issue that there are lots of empty regions after batch ingest. [#10015](https://github.com/tikv/tikv/pull/10015)
    - Use `zstd` to compress the snapshot [#10005](https://github.com/tikv/tikv/pull/10005)
    - Fix potential panics when input of cast_string_as_time is invalid UTF-8 bytes [#9995](https://github.com/tikv/tikv/pull/9995)
    - Fix the bug that TiKV cannot startup when the end of file dict file is damaged. [#9992](https://github.com/tikv/tikv/pull/9992)

+ PD

    - Modify score calculator to satisfy isomerous stores [#3605](https://github.com/pingcap/pd/pull/3605)
    - Avoid unexpected statistic modify after adding scatter region scheduler [#3602](https://github.com/pingcap/pd/pull/3602)

+ Tools

    - BR

        * BR now can tolerate minor TiKV disconnection. [#1019](https://github.com/pingcap/br/pull/1019)
        * Summary now become more clear. [#1009](https://github.com/pingcap/br/pull/1009)

    - TiCDC

        * Fix Unified Sorter returning unhelpful error messages & other misc. fixes. [#1678](https://github.com/pingcap/ticdc/pull/1678)
        * S3Sink:  cancel create existing table directory on s3 when initialize s3Sink to avoid uploading objects faild [#1672](https://github.com/pingcap/ticdc/pull/1672)
        * Fix text type decode for old row format [#1669](https://github.com/pingcap/ticdc/pull/1669)
        * No release note (this bug is never released) [#1667](https://github.com/pingcap/ticdc/pull/1667)
        * Set session variable `explicit_defaults_for_timestamp` to `ON` to make downstream MySQL5.7 keeps the same behavior with upstream TiDB. [#1659](https://github.com/pingcap/ticdc/pull/1659)
        * Fix the error handling for io.EOF may cause replication interuption. [#1648](https://github.com/pingcap/ticdc/pull/1648)
        * Correct TiKV CDC endpoint CPU metric in TiCDC dashboard. [#1645](https://github.com/pingcap/ticdc/pull/1645)
        * S3 sink: increase the defaultBufferChanSize of logSink to avoid blocking [#1632](https://github.com/pingcap/ticdc/pull/1632)
