---
title: tiup mirror publish
---

# tiup mirror publish {#tiup-mirror-publish}

コマンド`tiup mirror publish`は、新しいコンポーネントまたは既存のコンポーネントの新しいバージョンを公開するために使用されます。ターゲットコンポーネントへのアクセス権を持つコンポーネント所有者のみが公開できます。新しいコンポーネント所有者を追加するには、 [`grant`コマンド](/tiup/tiup-command-mirror-grant.md)の使用法を参照してください。

## 構文 {#syntax}

```shell
tiup mirror publish <comp-name> <version> <tarball> <entry> [flags]
```

各パラメータの意味は次のとおりです。

-   `<comp-name>` : `tidb`などのコンポーネントの名前。正規表現`^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$`に一致する文字列を使用することをお勧めします。
-   `<version>` : 公開するコンポーネントのバージョン。バージョン番号は[セマンティック バージョニング](https://semver.org/)の要件に従う必要があります。
-   `<tarball>` : `.tar.gz`パッケージのローカル ディレクトリ。依存関係とコンポーネントの実行ファイルをこのパッケージに入れる必要があります。 TiUP はこのパッケージをミラーにアップロードします。
-   `<entry>` : `<tarball>`のコンポーネントの実行可能ファイルの場所。

## オプション {#options}

### -k, --key {#k-key}

-   コンポーネント所有者の秘密鍵を指定します。クライアントは秘密鍵を使用して`{component}.json`ファイルに署名します。
-   データ型: `STRING`
-   デフォルト: 「${TIUP_HOME}/keys/private.json」

### - アーチ {#arch}

-   `<tarball>`のバイナリ ファイルを実行できるプラットフォームを指定します。単一の`<tarball>`パッケージの場合、次のオプションからのみプラットフォームを選択できます。

    -   `amd64` : ファイルが AMD64 マシンで実行されることを示します。
    -   `arm64` : ファイルが ARM64 マシンで実行されることを示します。
    -   `any` : スクリプトなどのファイルが AMD64 と ARM64 の両方のマシンで実行されることを示します。

-   データ型: `STRING`

-   デフォルト: 「${GOARCH}」

> **ノート：**
>
> `--arch`が`any`に設定されている場合は、 `--os` `any`に設定する必要があります。

### --os {#os}

-   `<tarball>`のバイナリ ファイルを実行できるオペレーティング システムを指定します。単一の`<tarball>`パッケージの場合、次のオプションからのみオペレーティング システムを選択できます。

    -   `linux` : ファイルが Linux オペレーティング システムで実行されることを示します。
    -   `darwin` : ファイルが Darwin オペレーティング システムで実行されることを示します。
    -   `any` : スクリプトなどのファイルが Linux と Darwin オペレーティング システムの両方で実行されることを示します。

-   データ型: `STRING`

-   デフォルト: 「${GOOS}」

> **ノート：**
>
> `--os`が`any`に設定されている場合は、 `--arch` `any`に設定する必要があります。

### --desc {#desc}

-   コンポーネントの説明を指定します。
-   データ型: `String`
-   デフォルト: NULL

### - 隠れる {#hide}

-   コンポーネントを非表示にするかどうかを指定します。非表示のコンポーネントの場合、 `tiup list -all`結果リストには表示されますが、 `tiup list`の結果リストには表示されません。
-   データ型: `STRING`
-   デフォルト: NULL

### --スタンドアロン {#standalone}

-   コンポーネントをスタンドアロンで実行できるかどうかを制御します。このオプションは現在**利用できません**。
-   データ型: `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、このオプションをコマンドに追加して、値`true`渡すか、値を何も渡さないようにします。

## 出力 {#outputs}

-   コマンドが正常に実行された場合、出力はありません。
-   コンポーネントの所有者がターゲットコンポーネントの変更を許可されていない場合:
    -   ミラーがリモート ミラーの場合、 TiUP はエラー`Error: The server refused, make sure you have access to this component`を報告します。
    -   ミラーがローカル ミラーの場合、 TiUP はエラー`Error: the signature is not correct`を報告します。

[&lt;&lt; 前のページに戻る - TiUP Mirror コマンド一覧](/tiup/tiup-command-mirror.md#command-list)
