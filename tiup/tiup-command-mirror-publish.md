---
title: tiup mirror publish
---

# tiup mirror publish {#tiup-mirror-publish}

コマンド`tiup mirror publish`は、新しいコンポーネントまたは既存のコンポーネントの新しいバージョンを公開するために使用されます。ターゲットコンポーネントにアクセスできるコンポーネント所有者のみがそれを公開できます。新しいコンポーネント所有者を追加するには、 [`grant`コマンド](/tiup/tiup-command-mirror-grant.md)の使用法を参照してください。

## 構文 {#syntax}

```shell
tiup mirror publish <comp-name> <version> <tarball> <entry> [flags]
```

各パラメーターの意味は次のとおりです。

-   `<comp-name>` ： `tidb`などのコンポーネントの名前。正規表現`^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$`に一致する文字列を使用することをお勧めします。
-   `<version>` ：公開するコンポーネントのバージョン。バージョン番号は、 [セマンティックバージョニング](https://semver.org/)の要件に従う必要があります。
-   `<tarball>` ： `.tar.gz`パッケージのローカルディレクトリ。コンポーネントの依存関係と実行可能ファイルをこのパッケージに入れる必要があります。 TiUPはこのパッケージをミラーにアップロードします。
-   `<entry>` ： `<tarball>`内のコンポーネントの実行可能ファイルの場所。

## オプション {#options}

### -k、-key {#k-key}

-   コンポーネント所有者の秘密鍵を指定します。クライアントは秘密鍵を使用して`{component}.json`のファイルに署名します。
-   データ型： `STRING`
-   デフォルト：「${TIUP_HOME}/keys/private.json」

### - アーチ {#arch}

-   `<tarball>`のバイナリファイルを実行できるプラットフォームを指定します。単一の`<tarball>`パッケージの場合、プラットフォームは次のオプションからのみ選択できます。

    -   `amd64` ：ファイルがAMD64マシンで実行されていることを示します。
    -   `arm64` ：ファイルがARM64マシンで実行されていることを示します。
    -   `any` ：スクリプトなどのファイルがAMD64マシンとARM64マシンの両方で実行されることを示します。

-   データ型： `STRING`

-   デフォルト： &quot;$ {GOARCH}&quot;

> **ノート：**
>
> `--arch`が`any`に設定されている場合、 `--os`も`any`に設定する必要があります。

### --os {#os}

-   `<tarball>`のバイナリファイルを実行できるオペレーティングシステムを指定します。単一の`<tarball>`パッケージの場合、オペレーティングシステムは次のオプションからのみ選択できます。

    -   `linux` ：ファイルがLinuxオペレーティングシステムで実行されていることを示します。
    -   `darwin` ：ファイルがDarwinオペレーティングシステムで実行されていることを示します。
    -   `any` ：スクリプトなどのファイルがLinuxとDarwinの両方のオペレーティングシステムで実行されていることを示します。

-   データ型： `STRING`

-   デフォルト：「${GOOS}」

> **ノート：**
>
> `--os`が`any`に設定されている場合、 `--arch`も`any`に設定する必要があります。

### --desc {#desc}

-   コンポーネントの説明を指定します。
-   データ型： `String`
-   デフォルト：NULL

### - 隠れる {#hide}

-   コンポーネントを非表示にするかどうかを指定します。非表示のコンポーネントの場合、 `tiup list -all`の結果リストには表示されますが、 `tiup list`の結果リストには表示されません。
-   データ型： `STRING`
-   デフォルト：NULL

### -スタンドアロン {#standalone}

-   コンポーネントをスタンドアロンで実行できるかどうかを制御します。このオプションは現在**利用できません**。
-   データ型： `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、このオプションをコマンドに追加して、 `true`の値を渡すか、値を渡さないようにします。

## 出力 {#outputs}

-   コマンドが正常に実行された場合、出力はありません。
-   コンポーネントの所有者がターゲットコンポーネントを変更する権限を持っていない場合：
    -   ミラーがリモートミラーの場合、TiUPはエラー`Error: The server refused, make sure you have access to this component`を報告します。
    -   ミラーがローカルミラーの場合、TiUPはエラー`Error: the signature is not correct`を報告します。

[&lt;&lt;前のページに戻る-TiUPミラーコマンドリスト](/tiup/tiup-command-mirror.md#command-list)
