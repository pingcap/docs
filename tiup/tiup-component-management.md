---
title: Manage TiUP Components with TiUP Commands
summary: Learn how to manage TiUP components using TiUP commands.
---

# TiUPコマンドでTiUPコンポーネントを管理する {#manage-tiup-components-with-tiup-commands}

次のTiUPコマンドを使用して、TiUPエコシステムのコンポーネントを管理できます。

-   list：コンポーネントリストを照会します。このTiUPコマンドを使用すると、インストールするすべてのオプションコンポーネントと、各コンポーネントのすべてのオプションバージョンを確認できます。
-   install：コンポーネントの特定のバージョンをインストールします。
-   update：コンポーネントを最新バージョンに更新します。
-   アンインストール：コンポーネントをアンインストールします。
-   status：実行中のコンポーネントのステータスをチェックします。
-   clean：コンポーネントがデプロイされているインスタンスをクリーンアップします。
-   help：ヘルプ情報を出力します。このコマンドに別のTiUPコマンドを追加すると、追加されたコマンドの使用法が出力されます。

このドキュメントでは、一般的なコンポーネント管理操作と対応するTiUPコマンドを紹介します。

## コンポーネントリストをクエリする {#query-the-component-list}

`tiup list`コマンドを使用して、コンポーネントリストを照会できます。このコマンドのこの使用法は次のとおりです。

-   `tiup list` ：インストールできるコンポーネントを確認します。
-   `tiup list ${component}` ：特定のコンポーネントのどのバージョンをインストールできるかを確認します。

上記のコマンドで次のフラグを使用することもできます。

-   `--installed` ：特定のコンポーネントのどのコンポーネントまたはどのバージョンがローカルにインストールされているかを確認します。 `--all` ：非表示のコンポーネントを含むすべてのコンポーネントを表示します`--verbose` ：すべての列を表示します（インストールされているバージョンとサポートされているプラットフォームを含む）

例1：現在インストールされているすべてのコンポーネントを表示します。

{{< copyable "" >}}

```shell
tiup list --installed
```

例2：サーバーからインストール可能なすべてのバージョンのTiKVコンポーネントのリストを取得します。

{{< copyable "" >}}

```shell
tiup list tikv
```

## コンポーネントをインストールする {#install-components}

`tiup install`コマンドを使用して、コンポーネントリストを照会できます。このコマンドのこの使用法は次のとおりです。

-   `tiup install <component>` ：指定されたコンポーネントの最新の安定バージョンをインストールします。
-   `tiup install <component>:[version]` ：指定されたコンポーネントの指定されたバージョンをインストールします。

例1：TiUPを使用して、最新の安定バージョンのTiDBをインストールします。

{{< copyable "" >}}

```shell
tiup install tidb
```

例2：TiUPを使用して、ナイトリーバージョンのTiDBをインストールします。

{{< copyable "" >}}

```shell
tiup install tidb:nightly
```

例3：TiUPを使用してTiKVv5.4.1をインストールします。

{{< copyable "" >}}

```shell
tiup install tikv:v5.4.1
```

## コンポーネントをアップグレードする {#upgrade-components}

コンポーネントの新しいバージョンが公開されたら、 `tiup update`コマンドを使用してこのコンポーネントをアップグレードできます。このコマンドの使用法は、次のフラグを除いて、基本的に`tiup install`の使用法と同じです。

-   `--all` ：すべてのコンポーネントをアップグレードします。
-   `--nightly` ：ナイトリーバージョンにアップグレードします。
-   `--self` ：TiUP自体を最新バージョンにアップグレードします。
-   `--force` ：強制的に最新バージョンにアップグレードします。

例1：すべてのコンポーネントを最新バージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --all
```

例2：すべてのコンポーネントをナイトリーバージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --all --nightly
```

例3：TiUPを最新バージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --self
```

## コンポーネントを操作する {#operate-components}

インストールが完了したら、 `tiup <component>`コマンドを使用して対応するコンポーネントを起動できます。

```shell
tiup [flags] <component>[:version] [args...]

Flags:
  -T, --tag string                     Specifies the tag for the component instance.
```

このコマンドを使用するには、コンポーネント名とオプションのバージョンを指定する必要があります。バージョンが指定されていない場合は、このコンポーネントの最新の安定バージョン（インストール済み）が使用されます。

コンポーネントを起動する前に、TiUPはそのディレクトリを作成し、このコンポーネントを操作用のディレクトリに配置します。コンポーネントはこのディレクトリにすべてのデータを生成します。このディレクトリの名前は、コンポーネントの動作時に指定されたタグ名です。タグが指定されていない場合、タグ名はランダムに生成されます。この作業ディレクトリは、インスタンスが終了すると*自動的に削除され*ます。

同じコンポーネントを複数回起動して前の作業ディレクトリを再利用する場合は、 `--tag`を使用して、コンポーネントの起動時に同じ名前を指定できます。タグを指定すると、インスタンスの終了時に作業ディレクトリが*自動的に削除されないため*、作業ディレクトリを再利用できます。

例1：TiDBv5.4.1を操作します。

{{< copyable "" >}}

```shell
tiup tidb:v5.4.1
```

例2：TiKVが動作するタグを指定します。

{{< copyable "" >}}

```shell
tiup --tag=experiment tikv
```

### コンポーネントの動作ステータスを照会する {#query-the-operating-status-of-a-component}

`tiup status`コマンドを使用して、コンポーネントの動作ステータスを確認できます。

{{< copyable "" >}}

```shell
tiup status
```

このコマンドを実行すると、インスタンスのリストが1行に1つずつ表示されます。リストには次の列が含まれています。

-   `Name` ：インスタンスのタグ名。
-   `Component` ：インスタンスのコンポーネント名。
-   `PID` ：オペレーティングインスタンスのプロセスID。
-   `Status` ：インスタンスのステータス。 `RUNNING`は、インスタンスが動作していることを意味します。 `TERM`は、インスタンスが終了することを意味します。
-   `Created Time` ：インスタンスの開始時刻。
-   `Directory` ：インスタンスの作業ディレクトリ`--tag`を使用して指定できます。
-   `Binary` ：インスタンスの実行可能プログラム`--binpath`を使用して指定できます。
-   `Args` ：オペレーティングインスタンスの引数。

### コンポーネントインスタンスをクリーンアップ {#clean-component-instance}

`tiup clean`コマンドを使用して、コンポーネントインスタンスをクリーンアップし、作業ディレクトリを削除できます。クリーニングの前にインスタンスがまだ動作している場合は、関連するプロセスが最初に強制終了されます。コマンドの使用法は次のとおりです。

{{< copyable "" >}}

```bash
tiup clean [tag] [flags]
```

次のフラグがサポートされています。

-   `--all` ：すべてのインスタンス情報をクリーンアップします。

上記のコマンドで、 `tag`はクリーンアップされるインスタンスタグです。 `--all`を使用すると、タグは渡されません。

例1： `experiment`のタグ名でコンポーネントインスタンスをクリーンアップします。

{{< copyable "" >}}

```shell
tiup clean experiment
```

例2：すべてのコンポーネントインスタンスをクリーンアップします。

{{< copyable "" >}}

```shell
tiup clean --all
```

### コンポーネントをアンインストールする {#uninstall-components}

TiUPを使用してインストールされたコンポーネントは、ローカルディスクスペースを占有します。古いバージョンのコンポーネントをあまり多く保持したくない場合は、コンポーネントのどのバージョンが現在インストールされているかを確認してから、このコンポーネントをアンインストールできます。

`tiup uninstall`コマンドを使用して、コンポーネントのすべてのバージョンまたは特定のバージョンをアンインストールできます。このコマンドは、すべてのコンポーネントのアンインストールもサポートしています。コマンドの使用法は次のとおりです。

{{< copyable "" >}}

```bash
tiup uninstall [component][:version] [flags]
```

このコマンドでは、次のフラグがサポートされています。

-   `--all` ：すべてのコンポーネントまたはバージョンをアンインストールします。
-   `--self` ：TiUP自体をアンインストールします。

`component`はアンインストールするコンポーネントです。 `version`はアンインストールするバージョンです。 `tiup uninstall`コマンドでは、 `component`と`version`の両方を無視できます。これら2つのいずれかを無視する場合は、 `--all`フラグを追加する必要があります。

-   バージョンが無視される場合、 `--all`を追加すると、このコンポーネントのすべてのバージョンがアンインストールされます。
-   バージョンとコンポーネントの両方が無視される場合、 `--all`を追加すると、すべてのバージョンのすべてのコンポーネントがアンインストールされます。

例1：TiDBv5.4.1をアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall tidb:v5.4.1
```

例2：すべてのバージョンのTiKVをアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall tikv --all
```

例3：インストールされているすべてのコンポーネントをアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall --all
```
