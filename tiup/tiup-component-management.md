---
title: Manage TiUP Components with TiUP Commands
summary: TiUPコマンドを使用してTiUPエコシステム内のコンポーネントを管理できます。コマンドにはlist、install、update、uninstall、status、clean、help、link、unlinkがあります。コンポーネントリストをクエリするには`tiup list`を使用し、コンポーネントをインストールするには`tiup install`を使用します。コンポーネントをアップグレードするには`tiup update`を使用し、コンポーネントの動作ステータスを問い合わせるには`tiup status`を使用します。コンポーネントをクリーンアップするには`tiup clean`を使用し、コンポーネントをアンインストールするには`tiup uninstall`を使用します。コンポーネントをリンクするには`tiup link`を使用し、リンクを解除するには`tiup unlink`を使用します。TiUPのバージョンを管理するには`tiup update --self`を使用します。
---

# TiUPコマンドを使用してTiUPコンポーネントを管理する {#manage-tiup-components-with-tiup-commands}

次のTiUPコマンドを使用して、 TiUPエコシステム内のコンポーネントを管理できます。

-   list:コンポーネントリストを問い合わせます。このTiUPコマンドを使用すると、インストールするすべてのオプション コンポーネントと、各コンポーネントのすべてのオプション バージョンを確認できます。
-   install:コンポーネントの特定のバージョンをインストールします。
-   update:コンポーネントを最新バージョンに更新します。
-   uninstall:コンポーネントをアンインストールします。
-   status: 実行中のコンポーネントのステータスを確認します。
-   clean:コンポーネントがデプロイされているインスタンスをクリーンアップします。
-   help: ヘルプ情報を出力します。このコマンドに別のTiUPコマンドを追加すると、追加されたコマンドの使用法が出力されます。
-   link:コンポーネントのバイナリを実行可能ディレクトリ ( `$TIUP_HOME/bin/` ) にリンクします。
-   unlink: `tiup link`コマンドで生成されたソフトリンクを削除します。

このドキュメントでは、一般的なコンポーネント管理操作と、対応するTiUPコマンドを紹介します。

## コンポーネントリストをクエリする {#query-the-component-list}

`tiup list`コマンドを使用してコンポーネントリストをクエリできます。このコマンドの使用法は次のとおりです。

-   `tiup list` : インストールできるコンポーネントを確認します。
-   `tiup list ${component}` : 特定のコンポーネントのどのバージョンをインストールできるかを確認します。

上記のコマンドで次のフラグを使用することもできます。

-   `--installed` : どのコンポーネントまたは特定のコンポーネントのどのバージョンがローカルにインストールされているかを確認します。 - `--all` : 非表示のコンポーネントを含むすべてのコンポーネントを表示します - `--verbose` : すべての列を表示します (インストールされているバージョンとサポートされているプラ​​ットフォームを含む)

例 1: 現在インストールされているすべてのコンポーネントをビュー。

```shell
tiup list --installed
```

例 2: インストール可能なすべてのバージョンの TiKVコンポーネントのリストをサーバーから取得します。

```shell
tiup list tikv
```

## コンポーネントのインストール {#install-components}

`tiup install`コマンドを使用してコンポーネントリストをクエリできます。このコマンドの使用法は次のとおりです。

-   `tiup install <component>` : 指定されたコンポーネントの最新の安定したバージョンをインストールします。
-   `tiup install <component>:[version]` : 指定されたコンポーネントの指定されたバージョンをインストールします。

例 1: TiUPを使用して、TiDB の最新の安定バージョンをインストールします。

```shell
tiup install tidb
```

例 2: TiUPを使用して、TiDB の夜間バージョンをインストールします。

```shell
tiup install tidb:nightly
```

例 3: TiUPを使用して TiKV v7.5.1 をインストールします。

```shell
tiup install tikv:v7.5.1
```

## コンポーネントをアップグレードする {#upgrade-components}

コンポーネントの新しいバージョンが公開された後、 `tiup update`コマンドを使用してこのコンポーネントをアップグレードできます。このコマンドの使用法は、次のフラグを除き、基本的に`tiup install`の使用法と同じです。

-   `--all` : すべてのコンポーネントをアップグレードします。
-   `--nightly` : 夜間バージョンにアップグレードします。
-   `--self` : TiUP自体を最新バージョンにアップグレードします。
-   `--force` : 強制的に最新バージョンにアップグレードします。

例 1: すべてのコンポーネントを最新バージョンにアップグレードします。

```shell
tiup update --all
```

例 2: すべてのコンポーネントを夜間バージョンにアップグレードします。

```shell
tiup update --all --nightly
```

例 3: TiUP を最新バージョンにアップグレードします。

```shell
tiup update --self
```

## コンポーネントの操作 {#operate-components}

インストールが完了したら、 `tiup <component>`コマンドを使用して、対応するコンポーネントを起動できます。

```shell
tiup [flags] <component>[:version] [args...]

Flags:
  -T, --tag string                     Specifies the tag for the component instance.
```

このコマンドを使用するには、コンポーネント名とオプションのバージョンを指定する必要があります。バージョンが指定されていない場合は、このコンポーネントの最新の安定バージョン (インストールされている) が使用されます。

コンポーネントが開始される前に、 TiUP はコンポーネント用のディレクトリを作成し、このコンポーネントを操作用のディレクトリに置きます。コンポーネントはすべてのデータをこのディレクトリに生成します。このディレクトリの名前は、コンポーネントの動作時に指定されたタグ名になります。タグが指定されていない場合、タグ名はランダムに生成されます。この作業ディレクトリは、インスタンスが終了すると*自動的に削除され*ます。

同じコンポーネントを複数回起動し、以前の作業ディレクトリを再利用する場合は、コンポーネントの起動時に`--tag`を使用して同じ名前を指定できます。タグを指定すると、インスタンス終了時に作業ディレクトリが*自動的に削除されなくなる*ため、作業ディレクトリを再利用するのに便利です。

例 1: TiDB v7.5.1 を動作させます。

```shell
tiup tidb:v7.5.1
```

例2：TiKVが動作するタグを指定します。

```shell
tiup --tag=experiment tikv
```

### コンポーネントの動作ステータスを問い合わせる {#query-the-operating-status-of-a-component}

`tiup status`コマンドを使用して、コンポーネントの動作ステータスを確認できます。

```shell
tiup status
```

このコマンドを実行すると、インスタンスのリストが 1 行に 1 つずつ表示されます。リストには次の列が含まれます。

-   `Name` : インスタンスのタグ名。
-   `Component` : インスタンスのコンポーネント名。
-   `PID` : 動作中のインスタンスのプロセスID。
-   `Status` : インスタンスのステータス。 `RUNNING`インスタンスが動作していることを意味します。 `TERM`インスタンスが終了したことを意味します。
-   `Created Time` : インスタンスの開始時刻。
-   `Directory` : インスタンスの作業ディレクトリ。 `--tag`を使用して指定できます。
-   `Binary` : インスタンスの実行可能プログラム。 `--binpath`を使用して指定できます。
-   `Args` : 動作中のインスタンスの引数。

### クリーンコンポーネントインスタンス {#clean-component-instance}

`tiup clean`コマンドを使用すると、コンポーネントインスタンスをクリーンアップし、作業ディレクトリを削除できます。クリーニング前にインスタンスがまだ動作している場合は、関連するプロセスが最初に強制終了されます。コマンドの使用方法は次のとおりです。

```bash
tiup clean [tag] [flags]
```

次のフラグがサポートされています。

-   `--all` : すべてのインスタンス情報をクリーンアップします。

上記のコマンドでは、 `tag`がクリーニング対象のインスタンス タグです。 `--all`を使用すると、タグは渡されません。

例 1: `experiment`タグ名を持つコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean experiment
```

例 2: すべてのコンポーネントインスタンスをクリーンアップします。

```shell
tiup clean --all
```

### コンポーネントのアンインストール {#uninstall-components}

TiUPを使用してインストールされたコンポーネントは、ローカル ディスク領域を占有します。古いバージョンのコンポーネントをあまり保持したくない場合は、現在インストールされているコンポーネントのバージョンを確認してから、このコンポーネントをアンインストールします。

`tiup uninstall`コマンドを使用すると、コンポーネントのすべてのバージョンまたは特定のバージョンをアンインストールできます。このコマンドは、すべてのコンポーネントのアンインストールもサポートしています。コマンドの使用方法は次のとおりです。

```bash
tiup uninstall [component][:version] [flags]
```

このコマンドでは次のフラグがサポートされています。

-   `--all` : すべてのコンポーネントまたはバージョンをアンインストールします。
-   `--self` : TiUP自体をアンインストールします。

`component`はアンインストールするコンポーネントです。 `version`はアンインストールするバージョンです。 `tiup uninstall`コマンドでは、 `component`と`version`は両方とも無視できます。これら 2 つのいずれかを無視した場合は、 `--all`フラグを追加する必要があります。

-   バージョンが無視される場合、 `--all`を追加すると、このコンポーネントのすべてのバージョンがアンインストールされます。
-   バージョンとコンポーネントの両方が無視される場合、 `--all`を追加すると、すべてのバージョンのすべてのコンポーネントがアンインストールされます。

例 1: TiDB v7.5.1 をアンインストールします。

```shell
tiup uninstall tidb:v7.5.1
```

例 2: すべてのバージョンの TiKV をアンインストールします。

```shell
tiup uninstall tikv --all
```

例 3: インストールされているすべてのコンポーネントをアンインストールします。

```shell
tiup uninstall --all
```

### リンクコンポーネント {#link-components}

TiUP v1.13.0 では、コンポーネントのバイナリを実行可能ディレクトリ ( `$TIUP_HOME/bin/` ) にリンクし、リンクを削除するための実験的コマンド`link`および`unlink`が追加されています。この機能を使用すると、異なるバージョン間で切り替える機能を維持しながら、毎回TiUP を経由せずにコンポーネントを呼び出すことができます。ただし、この方法には自動更新チェックと特定の環境変数の設定のプロセスが欠けており、一部のコンポーネント (ctl など) は使用できません。したがって、必要な場合にのみ使用することをお勧めします。

例 1: 最新バージョンのクラスターコンポーネントをインストールしてリンクする

```shell
tiup install cluster
tiup link cluster
```

例 2: クラスターコンポーネントをバージョン v1.13.0 に切り替える

```shell
tiup link cluster:v1.13.0
```

以下は`tiup link cluster`コマンドの出力です。

```shell
package cluster provides these executables: tiup-cluster
```

これは、クラスターコンポーネントのバイナリ名が`tiup-cluster`であることを示します。リンク コマンドが完了したら、コマンド ラインに`tiup-cluster`直接入力してクラスターコンポーネントを使用できます。

例3: クラスタコンポーネントのリンクを解除する

```shell
tiup unlink cluster
```

例 4: TiUPのバージョンを管理する

v1.13.0 より前では、 TiUP は`~/.tiup/bin/`にインストールされており、異なるバージョンを共存させることはできません。 v1.13.0 以降、他のコンポーネントと同様にTiUPをインストールしてリンクできます。

```shell
tiup update --self # update tiup itself to a version that supports link
tiup link tiup:v1.13.0
```
