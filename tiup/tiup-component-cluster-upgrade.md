---
title: tiup cluster upgrade
---

# tiupクラスタのアップグレード {#tiup-cluster-upgrade}

`tiup cluster upgrade`コマンドは、指定されたクラスタを特定のバージョンにアップグレードするために使用されます。

## 構文 {#syntax}

```shell
tiup cluster upgrade <cluster-name> <version> [flags]
```

-   `<cluster-name>` ：操作するクラスタ名。クラスタ名を忘れた場合は、 [クラスタリスト](/tiup/tiup-component-cluster-list.md)コマンドで確認できます。
-   `<version>` ：アップグレードするターゲットバージョン。現在、現在のクラスタよりも高いバージョンへのアップグレードのみが許可されています。つまり、ダウングレードは許可されていません。ナイトリーバージョンへのアップグレードも許可されていません。

## オプション {#options}

### - 力 {#force}

-   クラスタをアップグレードするには、クラスタが現在開始されていることを確認する必要があります。場合によっては、クラスタが開始されていないときにアップグレードすることをお勧めします。このとき、 `--force`を使用すると、アップグレード中のエラーを無視し、バイナリファイルを強制的に置き換えて、クラスタを起動できます。
-   データ型： `BOOLEAN`
-   デフォルト：false

> **ノート：**
>
> サービスを提供しているクラスタのアップグレードを強制すると、サービスが使用できなくなる可能性があります。未起動のクラスターは、アップグレードが成功すると自動的に開始されます。

### --転送タイムアウト {#transfer-timeout}

-   PDまたはTiKVをアップグレードする場合、アップグレードされたノードのリーダーが最初に他のノードに移行されます。移行プロセスには時間がかかります`-transfer-timeout`オプションで最大待機時間（秒単位）を設定できます。タイムアウト後、待機はスキップされ、サービスが直接アップグレードされます。
-   データ型： `uint`
-   デフォルト：300

> **ノート：**
>
> 待機をスキップしてサービスを直接アップグレードすると、サービスのパフォーマンスが低下する可能性があります。

### --ignore-config-check {#ignore-config-check}

-   バイナリが更新された後、 `<binary> --config-check <config-file>`を使用してTiDB、TiKV、およびPDコンポーネントの構成チェックが実行されます。 `<binary>`は新しくデプロイされたバイナリへのパスであり、 `<config-file>`はユーザー構成に基づいて生成された構成ファイルです。このチェックをスキップするには、 `--ignore-config-check`オプションを使用できます。
-   データ型： `BOOLEAN`
-   デフォルト：false

### - オフライン {#offline}

-   現在のクラスタが実行されていないことを宣言します。このオプションを指定すると、TiUPはサービスリーダーを別のノードに削除したり、サービスを再起動したりせず、クラスタコンポーネントのバイナリファイルを置き換えるだけです。
-   データ型： `BOOLEAN`
-   このオプションは、デフォルトで`false`の値で無効になっています。このオプションを有効にするには、このオプションをコマンドに追加し、 `true`の値を渡すか、値を渡さないようにします。

### -h、-help {#h-help}

-   ヘルプ情報を出力します。
-   データ型： `BOOLEAN`
-   デフォルト：false

## 出力 {#output}

アップグレードの進行状況のログ。

[&lt;&lt;前のページに戻る-TiUPClusterコマンドリスト](/tiup/tiup-component-cluster.md#command-list)
