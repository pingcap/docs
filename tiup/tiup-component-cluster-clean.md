---
title: tiup cluster clean
summary: tiup cluster clean` コマンドは、テスト環境でクラスターを停止し、すべてのデータを削除することでクラスターをリセットするために使用されます。データ、ログ、またはその両方を消去するオプションがあり、特定のノードまたはロールを無視することもできます。本番環境では注意して使用してください。
---

# tiup cluster clean {#tiup-cluster-clean}

テスト環境では、クラスターをデプロイ直後の状態（つまり、すべてのデータを削除）にリセットする必要がある場合があります。これは、 `tiup cluster clean`コマンドを使えば簡単に実行できます。コマンドを実行すると、クラスターが停止し、クラスターデータが削除されます。手動でクラスターを再起動すると、クリーンなクラスターになります。

> **警告：**
>
> このコマンドは、ログのクリーンアップのみを選択した場合でも、まずクラスターを停止します。そのため、本番環境では使用しないでください。

## 構文 {#syntax}

```shell
tiup cluster clean <cluster-name> [flags]
```

`<cluster-name>`はクリーンアップするクラスターです。

## オプション {#options}

### &#x20;--all {#all}

-   データとログを同時に消去します。1と`--data` `--log`同時に指定するのと同じです。
-   データ型: `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、コマンドにこのオプションを追加し、値`true`を渡すか、値を渡さないかのいずれかを選択します。
-   指定されていない場合は、少なくとも次のいずれかのオプションを指定する必要があります。
    -   --data: データをクリーンアップする
    -   --log: ログを消去する

### &#x20;--data {#data}

-   データをクリーンアップします。どちらも指定されていない場合、または`--all`指定されていない場合は、データはクリーンアップされません。
-   データ型: `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、コマンドにこのオプションを追加し、値`true`を渡すか、値を渡さないかのいずれかを選択します。

### &#x20;--log {#log}

-   ログを消去します。 `--all`も指定されていない場合、ログは消去されません。
-   データ型: `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、コマンドにこのオプションを追加し、値`true`を渡すか、値を渡さないかのいずれかを選択します。

### --ignore-node {#ignore-node}

-   クリーニングが不要なノードを指定します。複数のノードを指定するには、このオプションを複数回使用します。例： `--ignore-node <node-A> --ignore-node <node-B>` 。
-   データ型: `StringArray`
-   デフォルト: 空

### --ignore-role {#ignore-role}

-   クリーニングが不要なロールを指定します。複数のロールを指定するには、このオプションを複数回使用します。例： `--ignore-role <role-A> --ignore-role <role-B>` 。
-   データ型: `StringArray`
-   デフォルト: 空

### -h, --help {#h-help}

-   ヘルプ情報を出力します。
-   データ型: `BOOLEAN`
-   このオプションはデフォルトで無効になっており、デフォルト値は`false`です。このオプションを有効にするには、コマンドにこのオプションを追加し、値`true`を渡すか、値を渡さないかのいずれかを選択します。

## 出力 {#output}

tiup-clusterの実行ログ。

[&lt;&lt; 前のページに戻る - TiUPクラスタコマンド リスト](/tiup/tiup-component-cluster.md#command-list)
