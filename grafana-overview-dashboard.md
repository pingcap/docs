---
title: Key Metrics
summary: TiUPを使用してTiDBクラスターをデプロイすると、Grafanaダッシュボードには概要、PD、TiDB、TiKV、Node_exporter、Disk Performance、およびPerformance_overviewのサブダッシュボードが含まれます。日常的な操作では、主要なメトリクスが表示される概要ダッシュボードからコンポーネントステータスとクラスター全体の概要を取得できます。このドキュメントでは、これらの主要な指標について詳しく説明します。
---

# 主要な指標 {#key-metrics}

TiUPを使用して TiDB クラスターをデプロイする場合、監視システム (Prometheus および Grafana) も同時にデプロイされます。詳細については、 [TiDB モニタリング フレームワークの概要](/tidb-monitoring-framework.md)を参照してください。

Grafana ダッシュボードは、概要、PD、TiDB、TiKV、Node_exporter、Disk Performance、および Performance_overview を含む一連のサブ ダッシュボードに分割されています。診断に役立つ指標が多数あります。

日常的な操作の場合、主要なメトリクスが表示される概要ダッシュボードからコンポーネント(PD、TiDB、TiKV) ステータスとクラスター全体の概要を取得できます。このドキュメントでは、これらの主要な指標について詳しく説明します。

## 主要な指標の説明 {#key-metrics-description}

概要ダッシュボードに表示される主要な指標を理解するには、次の表を確認してください。

| サービス          | パネル名                          | 説明                                                                                                                                                                                                                                                                                                                                                                                                   | 正常範囲                                                                                            |
| ------------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| サービスポートのステータス | サービスアップ                       | 各サービスのオンラインノード数。                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| PD            | PDの役割                         | 現PDの役割。                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                 |
| PD            | ストレージ容量                       | TiDB クラスターの合計storage容量。                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                 |
| PD            | 現在のstorageサイズ                 | TiKV レプリカが占有するスペースを含む、TiDB クラスターの占有storage容量。                                                                                                                                                                                                                                                                                                                                                        |                                                                                                 |
| PD            | 通常店舗                          | 正常な状態のノードの数。                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| PD            | 異常店舗                          | 異常な状態にあるノードの数。                                                                                                                                                                                                                                                                                                                                                                                       | 0                                                                                               |
| PD            | リージョンの数                       | 現在のクラスター内のリージョンの合計数。リージョンの数はレプリカの数とは関係がないことに注意してください。                                                                                                                                                                                                                                                                                                                                                |                                                                                                 |
| PD            | 99% completed_cmds_duration_秒 | pd-server リクエストを完了するまでの 99 パーセンタイルの期間。                                                                                                                                                                                                                                                                                                                                                               | 5ms未満                                                                                           |
| PD            | Handle_requests_duration_秒    | PD リクエストのネットワーク継続時間。                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                 |
| PD            | リージョンの健康                      | 各リージョンの状態。                                                                                                                                                                                                                                                                                                                                                                                           | 一般に、保留中のピアの数は 100 未満であり、不足しているピアの数は常に`0`より大きいとは限りません。                                           |
| PD            | ホットライトリージョンのリーダー分布            | 各 TiKV インスタンスの書き込みホットスポットであるリーダーの合計数。                                                                                                                                                                                                                                                                                                                                                                |                                                                                                 |
| PD            | ホットリードリージョンのリーダー分布            | 各 TiKV インスタンスの読み取りホットスポットであるリーダーの合計数。                                                                                                                                                                                                                                                                                                                                                                |                                                                                                 |
| PD            | リージョンハートビートレポート               | インスタンスごとに PD に報告されたハートビートの数。                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| PD            | 99%リージョンのハートビートレイテンシー         | TiKV インスタンスごとのハートビートレイテンシー(P99)。                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| TiDB          | ステートメントOPS                    | 1 秒あたりに実行されるさまざまなタイプの SQL ステートメントの数。 `SELECT` 、 `INSERT` 、 `UPDATE` 、およびその他のタイプのステートメントに従ってカウントされます。                                                                                                                                                                                                                                                                                                 |                                                                                                 |
| TiDB          | 間隔                            | 実行時間。<br/> 1. クライアントのネットワーク リクエストが TiDB に送信されてから、TiDB がリクエストを実行した後にリクエストがクライアントに返されるまでの期間。一般に、クライアント要求は SQL ステートメントの形式で送信されます。ただし、この期間には`COM_PING` 、 `COM_SLEEP` 、 `COM_STMT_FETCH` 、 `COM_SEND_LONG_DATA`などのコマンドの実行時間が含まれる場合があります。<br/> 2. TiDB はマルチクエリをサポートしているため、TiDB は複数の SQL ステートメント ( `select 1; select 1; select 1;`など) を一度に送信することをサポートしています。この場合、このクエリの合計実行時間には、すべての SQL ステートメントの実行時間が含まれます。 |                                                                                                 |
| TiDB          | インスタンス別の CPS                  | CPS By Instance: 各 TiDB インスタンスに関するコマンド統計。コマンド実行結果の成功または失敗に従って分類されます。                                                                                                                                                                                                                                                                                                                                 |                                                                                                 |
| TiDB          | 失敗したクエリ OPM                   | 各 TiDB インスタンスで 1 秒あたりの SQL ステートメントを実行するときに発生したエラーに基づく、エラー タイプ (構文エラーや主キーの競合など) の統計。エラーが発生したモジュールとエラーコードが含まれます。                                                                                                                                                                                                                                                                                       |                                                                                                 |
| TiDB          | 接続数                           | 各 TiDB インスタンスの接続番号。                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                 |
| TiDB          | メモリ使用量                        | 各 TiDB インスタンスのメモリ使用量の統計。プロセスによって占有されているメモリと、 Golangによってヒープ上に適用されたメモリに分けられます。                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| TiDB          | トランザクションOPS                   | 1 秒あたりに実行されるトランザクションの数。                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                 |
| TiDB          | トランザクション期間                    | トランザクションの実行時間                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                 |
| TiDB          | KV コマンド OPS                   | 実行された KV コマンドの数。                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| TiDB          | KV コマンド持続時間 99                | KVコマンドの実行時間。                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| TiDB          | PD TSO OPS                    | TiDB が PD から 1 秒あたりに取得する TSO の数。                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| TiDB          | PD TSO 待機時間                   | PD が TSO を返すまで TiDB が待機する期間。                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| TiDB          | TiClientリージョンエラー OPS          | TiKV によって返されたリージョン関連のエラーの数。                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                 |
| TiDB          | ロック解決 OPS                     | ロックを解決する TiDB 操作の数。 TiDB の読み取りまたは書き込みリクエストでロックが発生すると、そのロックを解決しようとします。                                                                                                                                                                                                                                                                                                                                |                                                                                                 |
| TiDB          | KV バックオフ OPS                  | TiKV によって返されたエラーの数。                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                 |
| TiKV          | リーダー                          | 各 TiKV ノード上のリーダーの数。                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                 |
| TiKV          | 地域                            | 各 TiKV ノード上のリージョンの数。                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                 |
| TiKV          | CPU                           | 各 TiKV ノードの CPU 使用率。                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                 |
| TiKV          | メモリ                           | 各 TiKV ノードのメモリ使用量。                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                 |
| TiKV          | 店舗サイズ                         | 各 TiKV インスタンスによって使用されるstorageスペースのサイズ。                                                                                                                                                                                                                                                                                                                                                               |                                                                                                 |
| TiKV          | CFサイズ                         | 各カラムファミリー(略して CF) のサイズ。                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                 |
| TiKV          | チャンネルがいっぱいです                  | 各 TiKV インスタンスの「チャネルがいっぱい」エラーの数。                                                                                                                                                                                                                                                                                                                                                                      | 0                                                                                               |
| TiKV          | サーバーレポートの失敗                   | 各 TiKV インスタンスによって報告されたエラー メッセージの数。                                                                                                                                                                                                                                                                                                                                                                   | 0                                                                                               |
| TiKV          | スケジューラの保留中のコマンド               | 各 TiKV インスタンス上の保留中のコマンドの数。                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                 |
| TiKV          | コプロセッサー実行数                    | TiKV が受信した 1 秒あたりのコプロセッサー操作の数。コプロセッサーの各タイプは個別にカウントされます。                                                                                                                                                                                                                                                                                                                                              |                                                                                                 |
| TiKV          | コプロセッサー要求期間                   | コプロセッサの読み取りリクエストの処理に費やされた時間。                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| TiKV          | RaftストアCPU                    | raftstoreスレッドのCPU使用率                                                                                                                                                                                                                                                                                                                                                                                 | デフォルトのスレッド数は 2 です ( `raftstore.store-pool-size`で構成)。単一スレッドの値が 80% を超える場合は、CPU 使用率が非常に高いことを示します。 |
| TiKV          | コプロセッサーCPU                    | コプロセッサスレッドのCPU使用率。                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                 |
| システム情報        | Vコア                           | CPU コアの数。                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                 |
| システム情報        | メモリ                           | 総メモリ。                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                 |
| システム情報        | CPU使用率                        | CPU 使用率、最大 100%。                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| システム情報        | 荷重[1m]                        | 1分以内の過負荷。                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                 |
| システム情報        | 使用可能なメモリ                      | 使用可能なメモリのサイズ。                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                 |
| システム情報        | ネットワークトラフィック                  | ネットワークトラフィックの統計。                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                 |
| システム情報        | TCP再送信                        | TOC の再送信の頻度。                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                 |
| システム情報        | IO使用率                         | ディスク使用率、最大 100%。一般に、使用率が 80% ～ 90% に達した場合は、新しいノードの追加を検討する必要があります。                                                                                                                                                                                                                                                                                                                                    |                                                                                                 |

## 概要ダッシュボードのインターフェイス {#interface-of-the-overview-dashboard}

![overview](/media/grafana-monitor-overview.png)
