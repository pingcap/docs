---
title: TiDB Cloud TPC-C Performance Test Report
---

# TiDB Cloud TPC-C Performance Test Report

## Test overview

This test aims at showing the TPC-C performance of TiDB v7.1.0 in the Online Transactional Processing (OLTP) scenario.

## Test environment (TiDB Cloud AWS)

### Hardware configuration

| Service type | EC2 type | Instance count |
|:----------|:----------|:----------|
| PD        | 4C8G-20G |     3     |
| TiKV      |16C64G-1000G|     3     |
| TiDB      | 16C32G|     2     |
| TPC-C  | 8c16g|     1     |

### Software version

| Service type | Software version  |
| :----------- | :---------------- |
| PD           | v7.1.0  |
| TiDB         | v7.1.0 |
| TiKV         | v7.1.0 |

### Parameter configuration

#### TiKV parameter configuration

```yaml
[raft-engine]
prefill-for-recycle = true
```

### Prepare test data and run tpcc

1. Deploy TiDB v7.1.0 using TiDB Cloud.
2. Connect the cluster and create a database named `tpcc`: 
   ![privatelink](/media/tidb-cloud/privatelink.png)

   ```
   create database tpcc;
   ```
3. Use BenchmarkSQL to import the TPC-C 1000 Warehouse data: 
   ```
   go-tpc tpcc --host {{privatelink}} --warehouses 1000 prepare  -P 4000 -D tpcc -T {{thread}} --time 2h0m0s -p {{password}} --ignore-error
   ```
4. Collect the statics before running tpcc
   ```
   analyze table customer; 
   analyze table district; 
   analyze table history; 
   analyze table item; 
   analyze table new_order; 
   analyze table order_line; 
   analyze table orders; 
   analyze table stock; 
   analyze table warehouse;
   ```
   You can run the below commands to accelerate the collection of statistics
   ```
   set tidb_build_stats_concurrency=16;
   set tidb_distsql_scan_concurrency=16;
   set tidb_index_serial_scan_concurrency=16;
   ```
5. Run the command to perform stress tests on TiDB via privatelink. For each concurrency, the test takes 2 hours.
   ```
   go-tpc tpcc --host {{privatelink}} -P 4000 --warehouses 1000 run -D tpcc -T {{thread}} --time 2h0m0s -p {{password}} --ignore-error
   ``` 
6. Extract the tpmC data of New Order from the result.

## Test result

The TPC-C performance of v7.1.0 is 

| Threads |  v7.1.0 tpmC |
|:----------|:----------|
|50|37904|
|100|67790|
|200|93479|

![TPC-C](/media/tidb-cloud/v7.1.0-tpmC.png)
