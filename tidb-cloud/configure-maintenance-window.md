---
title: Configure Maintenance Window
summary: クラスターのメンテナンス ウィンドウを構成する方法を学習します。
---

# メンテナンスウィンドウの設定 {#configure-maintenance-window}

メンテナンス ウィンドウとは、 TiDB Cloudサービスの信頼性、セキュリティ、パフォーマンスを確保するために、オペレーティング システムの更新、セキュリティ パッチ、インフラストラクチャのアップグレードなどの計画されたメンテナンス タスクが自動的に実行される指定された期間です。

メンテナンス期間中は、 TiDB Cloud Dedicated クラスタに対して個別にメンテナンスが実行されるため、全体的な影響は最小限に抑えられます。一時的な接続中断や QPS の変動が発生する可能性はありますが、クラスタは引き続き利用可能であり、既存のデータインポート、バックアップ、リストア、移行、レプリケーションタスクは通常どおり実行できます。

メンテナンスウィンドウを設定することで、メンテナンスタスクのスケジュールと管理が容易になり、メンテナンスによる影響を最小限に抑えることができます。例えば、メンテナンスウィンドウの開始時間を設定することで、アプリケーションのワークロードのピーク時間帯を避けることができます。

> **注記：**
>
> メンテナンス ウィンドウ機能は[TiDB Cloud専用クラスター](/tidb-cloud/select-cluster-tier.md#tidb-cloud-dedicated)のみで使用できます。

## メンテナンス期間中に許可される操作と許可されない操作 {#allowed-and-disallowed-operations-during-a-maintenance-window}

メンテナンス期間中は、一部の操作は許可されますが、一部の操作は許可されません。

-   許可される操作:

    -   SQL操作
    -   クラスターを作成する
    -   クラスターを削除する
    -   バックアップタスクを作成する
    -   クラスターを復元する
    -   クラスターページにアクセスする

-   許可されない操作:

    -   クラスターを変更、一時停止、または再開する
    -   TiDB Cloudコンソールでセキュリティ設定を変更する
    -   プライベートリンクを作成するか、VPCピアリングを構成する
    -   インポートタスク、移行ジョブ、または変更フィードを作成する
    -   移行ジョブまたは変更フィードのスケール仕様

## メンテナンスウィンドウの通知を受け取る {#get-notifications-for-maintenance-windows}

潜在的な混乱を避けるためには、メンテナンス スケジュールを把握し、それに応じて操作を計画することが重要です。

メンテナンス ウィンドウごとに、 TiDB Cloud は次の時点ですべてのプロジェクト メンバーに 4 つの電子メール通知を送信します。

-   メンテナンス期間の開始2週間前（緊急メンテナンスタスクを除く）
-   メンテナンスウィンドウが開始する72時間前
-   メンテナンスウィンドウが開始される時間
-   メンテナンスウィンドウが完了した時間

## メンテナンスウィンドウのビューと構成 {#view-and-configure-maintenance-windows}

定期的なメンテナンスにより、 TiDB Cloud をセキュリティ脅威、パフォーマンス問題、信頼性の低下から保護するための重要なアップデートが確実に実行されます。そのため、メンテナンスウィンドウはデフォルトで有効になっており、無効にすることはできません。

> **注記：**
>
> -   TiDB Cloudに初めてサインアップしたときに自動的に作成されるデフォルトのプロジェクトの場合、メンテナンス ウィンドウは毎週水曜日の午前 3 時に開始されます ( TiDB Cloud組織のタイム ゾーンに基づきます)。
> -   新しく作成するプロジェクトでは、プロジェクトのセットアップ時にメンテナンス ウィンドウのカスタム開始時刻を設定できます。

次のように、開始時刻を希望の時間に変更したり、期限までメンテナンス タスクを再スケジュールしたりできます。

1.  [TiDB Cloudコンソール](https://tidbcloud.com)にログインします。

2.  クリック<mdsvgicon name="icon-left-projects">左下隅で、複数のプロジェクトがある場合は対象のプロジェクトに切り替えて、 **[プロジェクト設定] を**クリックします。</mdsvgicon>

3.  プロジェクトの**「プロジェクト設定」**ページで、左側のナビゲーション ペインの**「メンテナンス」**をクリックします。

    -   メンテナンスタスクが表示されている場合は、説明、開始予定時刻、期限を確認してください。メンテナンスタスクは指定された時間に開始されます。

    -   メンテナンス データがない場合、最近メンテナンス タスクがスケジュールされていないことを意味します。

4.  （オプション）**メンテナンスウィンドウの開始時刻を変更するには、「メンテナンスウィンドウ設定」を**クリックします。メンテナンスは、その週にメンテナンスウィンドウが予定されている場合にのみ、指定された開始時刻に実行されます。

5.  特定のメンテナンス タスクのスケジュールを変更するには、 **[アクション**] 列の**[...** ] &gt; **[スケジュール変更]**をクリックし、期限前の新しい時刻を選択します。

    期限を過ぎてメンテナンス タスクのスケジュールを変更する必要がある場合は、 [TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md#tidb-cloud-support)連絡してサポートを受けてください。

## よくある質問 {#faqs}

-   メンテナンスタスクとは何ですか?

    メンテナンス タスクには通常、オペレーティング システムの更新、セキュリティ パッチ、インフラストラクチャのアップグレードが含まれます。

-   メンテナンスウィンドウを無効にすることはできますか?

    いいえ。メンテナンスウィンドウはデフォルトで有効になっており、無効にすることはできません。メンテナンスウィンドウの開始時刻を変更したり、メンテナンスタスクを期限まで再スケジュールしたりすることは可能です。詳細については、 [メンテナンスウィンドウのビューと構成](#view-and-configure-maintenance-windows)ご覧ください。

-   メンテナンスウィンドウはどのくらい続きますか?

    状況によります。各プロジェクトごとに、対象となるTiDBクラスタに対してメンテナンスが1つずつ実行されます。メンテナンスの所要時間は、クラスタの数、クラスタデータのサイズ、および実行するメンテナンスタスクによって異なります。

-   メンテナンス タスクはどのステータスのクラスターでも実行されますか?

    いいえ。TiDB TiDB Cloud は、クラスターでメンテナンス タスクを実行する前にクラスターのステータスを確認します。

    -   クラスターが**作成**中または**一時停止中の**ステータスの場合、メンテナンス タスクは必要ありません。
    -   クラスターが自動または手動バックアップを実行している場合、メンテナンスは現在のバックアップが正常に完了するまで延期され、実行されます。データ量が多いクラスターの場合、バックアッププロセスに12時間など長時間かかる場合がありますのでご注意ください。クラスターへの影響を最小限に抑えるため、バックアップの開始時間とメンテナンスウィンドウを慎重に設定することをお勧めします。
    -   クラスターが他のステータスにある場合、メンテナンス タスクはスケジュールどおりに開始されます。
