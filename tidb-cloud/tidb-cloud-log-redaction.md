---
title: User-Controlled Log Redaction
summary: 実行ログ内の機密データの可視性を管理するために、 TiDB Cloud Dedicated クラスターのユーザー制御のログ編集を有効または無効にする方法を学習します。
---

# ユーザー制御のログ編集 {#user-controlled-log-redaction}

ユーザー制御のログ編集機能により、 [TiDB Cloud専用](/tidb-cloud/select-cluster-tier.md#tidb-cloud-dedicated)クラスタのログに含まれる機密データの可視性を管理できます。この編集機能を切り替えることで、情報を保護し、運用上のニーズとセキュリティのバランスを取り、クラスタログに表示される内容を制御できます。

ログ編集はデフォルトで有効になっており、実行ログと実行プラン内の機密情報が隠蔽されます。クラスターのメンテナンスやSQLチューニングのためにより詳細なログ情報が必要な場合は、いつでもこの機能を無効にすることができます。

> **注記：**
>
> ログ編集機能は、 TiDB Cloud Dedicated クラスターでのみサポートされます。

## 前提条件 {#prerequisites}

-   TiDB Cloudで組織の**組織所有者**または**プロジェクト所有者の**役割を持っている必要があります。
-   クラスターが`paused`状態にある場合、ログ編集を有効または無効にすることはできません。

## ログ編集を無効にする {#disable-log-redaction}

> **警告：**
>
> ログ編集を無効にすると、機密情報が漏洩し、データ漏洩のリスクが高まる可能性があります。続行する前に、このリスクを十分に理解し、認識していることを確認してください。診断またはメンテナンスタスクが完了したら、すぐにログ編集を再度有効にしてください。

ログ編集を無効にするには、次の手順を実行します。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)にログインします。

2.  [**クラスター**](https://tidbcloud.com/project/clusters)ページに移動し、ターゲット クラスターの名前をクリックして概要ページに移動します。

    > **ヒント：**
    >
    > 左上隅のコンボ ボックスを使用して、組織、プロジェクト、クラスターを切り替えることができます。

3.  左側のナビゲーション ペインで、 **[設定]** &gt; **[Security]**をクリックします。

4.  **実行ログの編集**セクションでは、編集機能がデフォルトで**有効になっている**ことがわかります。

5.  **「無効にする」を**クリックします。ログ編集を無効にすることのリスクを説明する警告が表示されます。

6.  無効化を確認します。

ログ編集を無効にした後、次の点に注意してください。

-   変更は新しいデータベース接続にのみ適用されます。
-   既存の接続は影響を受けません。変更を有効にするには、再接続する必要があります。
-   新しいセッションのログは編集されなくなります。

## 更新されたログを確認する {#check-the-updated-logs}

ログ編集を無効にした後で更新されたログを確認するには、次の手順を実行します。

1.  遅いクエリによって発生するパフォーマンスの問題をシミュレートします。例えば、次のSQL文を実行します。

    ```sql
    SELECT *, SLEEP(2) FROM users WHERE email LIKE "%useremail%";
    ```

2.  スロークエリログが更新されるまで数分間お待ちください。

3.  ログを確認して、機密データが編集されていないことを確認します。

## ログ編集を有効にする {#enable-log-redaction}

データのセキュリティを維持するために、次のように診断またはメンテナンス タスクを完了したらすぐに**ログ編集を有効にします**。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)にログインします。

2.  [**クラスター**](https://tidbcloud.com/project/clusters)ページに移動し、ターゲット クラスターの名前をクリックして概要ページに移動します。

    > **ヒント：**
    >
    > 左上隅のコンボ ボックスを使用して、組織、プロジェクト、クラスターを切り替えることができます。

3.  左側のナビゲーション ペインで、 **[設定]** &gt; **[Security]**をクリックします。

4.  **実行ログの編集**セクションでは、編集機能が**無効になっている**ことがわかります。

5.  有効にするには、 **[有効]**をクリックします。

6.  新しいセッションで変更を有効にするには、データベースに再接続します。
