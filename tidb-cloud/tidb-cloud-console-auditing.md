---
title: Console Audit Logging
summary: TiDB Cloudは、コンソール監査ログ機能を提供しています。組織の所有者またはコンソール監査管理者の役割が必要です。ログは90日間保存され、組織内のユーザーアクションのみが追跡されます。ログを有効または無効にするには、TiDB Cloudコンソールで設定を変更します。ログはJSONまたはCSV形式でエクスポートできます。ログにはイベントタイプ、操作者、結果などの情報が含まれます。
---

# コンソール監査ログ {#console-audit-logging}

TiDB Cloudは、コンソール監査ログ機能を提供して、 [TiDB Cloudコンソール](https://tidbcloud.com)上のユーザーのさまざまな動作や操作を追跡するのに役立ちます。たとえば、ユーザーを組織に招待したり、クラスターを作成したりするなどの操作を追跡できます。

## 前提条件 {#prerequisites}

-   TiDB Cloudでは、組織の`Organization Owner`または`Organization Console Audit Admin`役割に属している必要があります。そうしないと、 TiDB Cloudコンソールにコンソール監査ログ関連のオプションが表示されません。 `Organization Console Audit Admin`ロールはリクエストに応じてのみ表示されるため、 `Organization Owner`ロールを直接使用することをお勧めします。 `Organization Console Audit Admin`ロールを使用する必要がある場合は、 **「?」**をクリックします。 [TiDB Cloudコンソール](https://tidbcloud.com)の右下隅にある**[サポートをリクエスト]**をクリックします。次に、「**説明」**フィールドに「組織コンソール監査管理者の役割に応募する」と入力し、 **「送信」**をクリックします。 TiDB Cloudでの役割の詳細については、 [ユーザーの役割](/tidb-cloud/manage-user-access.md#user-roles)を参照してください。
-   コンソール監査ログを有効または無効にできるのは、組織に対してのみです。追跡できるのは、組織内のユーザーのアクションのみです。
-   コンソール監査ログを有効にすると、 TiDB Cloudコンソールのすべてのイベント タイプが監査されるようになり、一部のイベント タイプのみを監査するように指定することはできません。

## コンソール監査ログを有効にする {#enable-console-audit-logging}

コンソール監査ログ機能はデフォルトでは無効になっています。これを有効にするには、次の手順を実行します。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)の左下隅にある をクリックします。<mdsvgicon name="icon-top-organization">をクリックし、 **「コンソール監査ログ」**をクリックします。</mdsvgicon>
2.  右上隅の**[設定]**をクリックし、コンソール監査ログを有効にします。

## コンソール監査ログを無効にする {#disable-console-audit-logging}

コンソール監査ログを無効にするには、次の手順を実行します。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)の左下隅にある をクリックします。<mdsvgicon name="icon-top-organization">をクリックし、 **「コンソール監査ログ」**をクリックします。</mdsvgicon>
2.  右上隅にある**[設定]**をクリックし、コンソール監査ログを無効にします。

## コンソール監査ログをビュー {#view-console-audit-logs}

表示できるのは、組織のコンソール監査ログのみです。

> **注記：**
>
> -   組織が初めてコンソール監査ログを有効にする場合、コンソール監査ログは空です。監査されたイベントが実行されると、対応するログが表示されます。
> -   コンソール監査ログが無効になってから 90 日以上経過している場合、ログは表示されません。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)の左下隅にある をクリックします。<mdsvgicon name="icon-top-organization">をクリックし、 **「コンソール監査ログ」**をクリックします。</mdsvgicon>
2.  監査ログの特定の部分を取得するには、イベント タイプ、操作ステータス、および時間範囲をフィルタリングできます。
3.  (オプション) さらにフィールドをフィルタするには、 **[詳細フィルタ]**をクリックし、さらにフィルタを追加して、 **[適用]**をクリックします。
4.  ログの行をクリックすると、右側のペインに詳細情報が表示されます。

## コンソール監査ログをエクスポートする {#export-console-audit-logs}

組織のコンソール監査ログをエクスポートするには、次の手順を実行します。

1.  [TiDB Cloudコンソール](https://tidbcloud.com/)の左下隅にある をクリックします。<mdsvgicon name="icon-top-organization">をクリックし、 **「コンソール監査ログ」**をクリックします。</mdsvgicon>
2.  (オプション) コンソール監査ログの特定の部分をエクスポートする必要がある場合は、さまざまな条件でフィルタリングできます。それ以外の場合は、この手順をスキップしてください。
3.  **[エクスポート]**をクリックし、JSON または CSV で目的のエクスポート形式を選択します。

## コンソール監査ログstorageポリシー {#console-audit-log-storage-policy}

コンソール監査ログのstorage期間は 90 日間で、その後、ログは自動的にクリーンアップされます。

> **注記：**
>
> -   TiDB Cloudではコンソール監査ログのstorage場所を指定できません。
> -   監査ログを手動で削除することはできません。

## コンソール監査イベントの種類 {#console-audit-event-types}

コンソール監査ログは、イベント タイプを通じてTiDB Cloudコンソール上のさまざまなユーザー アクティビティを記録します。

> **注記：**
>
> 現在、 TiDB Cloudコンソール上のほとんどのイベント タイプは監査できます。それらは次の表で確認できます。まだカバーされていない残りのイベント タイプについても、 TiDB Cloud は引き続きそれらを含めるように取り組んでいきます。

| コンソール監査イベントの種類               | 説明                                     |
| ---------------------------- | -------------------------------------- |
| 組織の作成                        | 組織を作成する                                |
| ログイン組織                       | 組織にログインする                              |
| スイッチ組織                       | 現在の組織から別の組織に切り替える                      |
| ログアウト組織                      | 組織からログアウトする                            |
| ユーザーを組織に招待                   | ユーザーを組織に招待する                           |
| 組織への招待を削除                    | 組織に参加するためのユーザーの招待を削除する                 |
| 組織への招待を再送信                   | ユーザーが組織に参加するための招待状を再送信する               |
| 組織への参加を確認する                  | 招待されたユーザーが組織への参加を確認する                  |
| 組織からユーザーを削除                  | 参加しているユーザーを組織から削除する                    |
| UpdateUserRoleInOrganization | 組織内のユーザーの役割を更新する                       |
| APIキーの作成                     | APIキーを作成する                             |
| APIキーの編集                     | APIキーを編集する                             |
| APIキーの削除                     | APIキーを削除する                             |
| タイムゾーンの更新                    | 組織のタイムゾーンを更新する                         |
| ショービル                        | 組織請求書を表示する                             |
| 請求書をダウンロード                   | 組織請求書をダウンロードする                         |
| クレジットを表示                     | 組織のクレジットを表示する                          |
| ペイメントカードの追加                  | 支払いカードを追加する                            |
| ペイメントカードの更新                  | 支払いカードを更新する                            |
| ペイメントカードの削除                  | 支払いカードを削除する                            |
| SetDefaultPaymentCard        | デフォルトの支払いカードを設定する                      |
| 請求プロファイルの編集                  | 請求プロファイル情報の編集                          |
| 契約アクション                      | 契約関連の活動を整理する                           |
| コンソール監査ログを有効にする              | コンソール監査ログを有効にする                        |
| ShowConsole監査ログ              | コンソール監査ログを表示する                         |
| ユーザーをプロジェクトに招待               | ユーザーをプロジェクトに招待する                       |
| プロジェクトへの招待を削除                | プロジェクトに参加するためのユーザーの招待を削除する             |
| プロジェクトへの招待を再送信               | ユーザーがプロジェクトに参加するための招待状を再送信する           |
| プロジェクトに参加することを確認する           | 招待されたユーザーがプロジェクトへの参加を確認する              |
| プロジェクトからユーザーを削除              | 参加しているユーザーをプロジェクトから削除する                |
| プロジェクトの作成                    | プロジェクトを作成する                            |
| プロジェクトCIDRの作成                | 新しいプロジェクトCIDRを作成する                     |
| CreateAWSVPCピアリング            | AWS VPC ピアリングを作成する                     |
| 削除AWSVPCピアリング                | AWS VPC ピアリングを削除する                     |
| CreateGCPVPCeering           | Google Cloud VPC ピアリングを作成する            |
| 削除GCPVPCeering               | Google Cloud VPC ピアリングを削除する            |
| CreatePrivateEndpointService | プライベート エンドポイント サービスの作成                 |
| DeletePrivateEndpointService | プライベート エンドポイント サービスを削除する               |
| AWSプライベートエンドポイントの作成          | AWS プライベート エンドポイントを作成する                |
| AWSPrivateEndPoint の削除       | AWSプライベートエンドポイントを削除する                  |
| アラートを購読する                    | アラートを購読する                              |
| アラートの購読解除                    | アラートの購読を解除する                           |
| データドッグの作成統合                  | Datadog 統合の作成                          |
| 削除データドッグ統合                   | Datadog 統合の削除                          |
| CreateVercel統合               | Vercel統合の作成                            |
| 削除Vercel統合                   | Vercel統合の削除                            |
| プロメテウスの作成統合                  | Prometheus 統合の作成                       |
| 削除プロメテウス統合                   | Prometheus 統合の削除                       |
| クラスターの作成                     | クラスターを作成する                             |
| クラスターの削除                     | クラスターを削除する                             |
| クラスターの一時停止                   | クラスターを一時停止する                           |
| クラスタを再開する                    | クラスターを再開する                             |
| スケールクラスター                    | クラスターをスケールする                           |
| ダウンロードTiDBClusterCA          | TiDB クラスター CA 証明書をダウンロードする             |
| OpenWebSQLコンソール              | Web SQL を介して TiDB クラスターに接続する           |
| SetRootPassword              | TiDB クラスターの root パスワードを設定する            |
| IPAccessListの更新              | TiDB クラスターの IP アクセス リストを更新する           |
| 自動バックアップの設定                  | TiDB クラスターの自動バックアップ メカニズムを設定する         |
| 手動バックアップを行う                  | TiDB クラスターの手動バックアップを実行する               |
| バックアップタスクの削除                 | バックアップタスクを削除する                         |
| バックアップの削除                    | バックアップファイルを削除する                        |
| バックアップから復元                   | バックアップ ファイルに基づいて TiDB クラスターに復元する       |
| ゴミ箱から復元                      | ゴミ箱内のバックアップ ファイルに基づいて TiDB クラスターに復元します |
| AWS からデータをインポート              | AWS からデータをインポートする                      |
| GCP からデータをインポート              | Google Cloud からデータをインポートする             |
| ローカルからデータをインポート              | ローカルディスクからデータをインポートする                  |
| 移行ジョブの作成                     | 移行ジョブを作成する                             |
| 一時停止移行ジョブ                    | 移行ジョブを一時停止する                           |
| 再開移行ジョブ                      | 移行ジョブを再開する                             |
| 移行ジョブの削除                     | 移行ジョブを削除する                             |
| 表示診断                         | 診断情報を表示する                              |
| DB監査ログアクション                  | データベース監査ログのアクティビティを設定する                |
| DBAuditFilterの追加             | データベース監査ログフィルターを追加する                   |
| DB監査フィルタの削除                  | データベース監査ログフィルタを削除する                    |
| プロジェクトの編集                    | プロジェクトの情報を編集する                         |
| プロジェクトの削除                    | プロジェクトを削除する                            |
| バインドサポートプラン                  | サポートプランをバインドする                         |
| キャンセルサポートプラン                 | サポートプランをキャンセルする                        |
| 組織名を更新する                     | 組織名を更新します                              |
| 支出制限の設定                      | TiDB サーバーレスクラスターの使用量制限を編集する            |
| メンテナンスウィンドウの更新               | メンテナンスウィンドウの開始時刻を変更する                  |
| メンテナンスタスクの延期                 | メンテナンスタスクを延期する                         |
| ブランチの作成                      | TiDB サーバーレス ブランチを作成する                  |
| ブランチの削除                      | TiDB サーバーレス ブランチを削除する                  |
| ブランチルートパスワードの設定              | TiDB サーバーレス ブランチの root パスワードを設定する      |
| ブランチGitHubに接続する              | クラスターを GitHub リポジトリに接続してブランチ統合を有効にする   |
| 切断ブランチGitHub                 | クラスターを GitHub リポジトリから切断して分岐統合を無効にします   |

## コンソール監査ログのフィールド {#console-audit-log-fields}

ユーザー アクティビティの追跡を支援するために、 TiDB Cloudは各コンソール監査ログに次のフィールドを提供します。

| フィールド名           | データ・タイプ | 説明                                                                       |
| ---------------- | ------- | ------------------------------------------------------------------------ |
| タイプ              | 弦       | イベントタイプ                                                                  |
| 終了時刻             | タイムスタンプ | イベント時間                                                                   |
| 演算子の種類           | 列挙型     | 演算子の種類: `user`または`api_key`                                               |
| オペレーターID         | uint64  | オペレーターID                                                                 |
| オペレータ名           | 弦       | オペレーター名                                                                  |
| オペレーターIP         | 弦       | オペレータのIPアドレス                                                             |
| オペレーター_ログイン_メソッド | 列挙型     | オペレーターのログイン方法: `google` 、 `github` 、 `microsoft` 、 `email` 、または`api_key` |
| 組織ID             | uint64  | イベントが所属する組織ID                                                            |
| 組織名              | 弦       | イベントが所属する組織名                                                             |
| プロジェクトID         | uint64  | イベントが属するプロジェクトID                                                         |
| プロジェクト名          | 弦       | イベントが属するプロジェクト名                                                          |
| クラスターID          | uint64  | イベントが属するクラスタID                                                           |
| クラスター名           | 弦       | イベントが属するクラスタ名                                                            |
| トレースID           | 弦       | オペレーターによって開始されたリクエストのトレース ID。このフィールドは現在空ですが、将来のリリースで使用できるようになる予定です。      |
| 結果               | 列挙型     | イベント結果: `success`または`failure`                                            |
| 詳細               | json    | イベントの詳しい説明                                                               |
