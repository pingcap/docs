---
title: Back up and Restore TiDB Cluster Data
summary: Learn how to back up and restore your TiDB Cloud cluster.
aliases: ['/tidbcloud/restore-deleted-tidb-cluster']
---

# TiDBクラスターデータのバックアップと復元 {#back-up-and-restore-tidb-cluster-data}

このドキュメントでは、 TiDB CloudでTiDBクラスタデータをバックアップおよび復元する方法について説明します。

## バックアップ {#backup}

TiDB Cloudは、自動バックアップと手動バックアップの2種類のデータバックアップを提供します。

[開発者層クラスター](/tidb-cloud/select-cluster-tier.md#developer-tier)の場合、各クラスタで1つの自動バックアップと2つの手動バックアップが可能です。

-   自動バックアップの場合、既存のバックアップは新しいバックアップに置き換えられます。
-   手動バックアップの場合、すでに2つのバックアップがある場合は、別のバックアップを作成する前に、少なくとも1つのバックアップを削除する必要があります。

### 自動バックアップ {#automatic-backup}

自動バックアップにより、設定したバックアップ時間にクラスタデータを毎日バックアップすることができます。バックアップ時間を設定するには、次の手順を実行します。

1.  クラスタの[**バックアップ**]タブに移動します。

2.  [**自動設定]**をクリックします。設定ウィンドウが表示されます。

3.  設定ウィンドウで、[**制限]（バックアップファイル）**の[<strong>バックアップ時間</strong>と最大バックアップファイル]を選択します。

4.  [**確認]**をクリックします。

優先バックアップ時間を指定しない場合、 TiDB Cloudは各リージョンに基づいてデフォルトのバックアップ時間を割り当てます。次の表に、各リージョンのデフォルトのバックアップ時間を示します。

| クラウドプロバイダー | 地域名             | 領域              | デフォルトのバックアップ時間 |
| ---------- | --------------- | --------------- | -------------- |
| AWS        | 米国東部（バージニア州北部）  | us-east-1       | 07:00 UTC      |
| AWS        | US West（オレゴン）   | us-west-2       | 10:00 UTC      |
| AWS        | アジア太平洋（東京）      | ap-northeast-1  | 17:00 UTC      |
| AWS        | アジア太平洋（ソウル）     | ap-northeast-2  | 17:00 UTC      |
| AWS        | アジア太平洋（シンガポール）  | ap-southeast-1  | 18:00 UTC      |
| AWS        | アジアパシフィック（ムンバイ） | ap-south-1      | 20:30 UTC      |
| AWS        | ヨーロッパ（フランクフルト）  | eu-central-1    | 03:00 UTC      |
| GCP        | アイオワ            | us-central1     | 08:00 UTC      |
| GCP        | オレゴン            | us-west1        | 10:00 UTC      |
| GCP        | 東京              | asia-northeast1 | 17:00 UTC      |
| GCP        | シンガポール          | asia-southeast1 | 18:00 UTC      |
| GCP        | 台湾              | asia-east1      | 18:00 UTC      |

自動バックアップを無効にすることはできないことに注意してください。

### 手動バックアップ {#manual-backup}

手動バックアップはユーザーが開始するバックアップであり、必要に応じてデータを既知の状態にバックアップし、いつでもその状態に復元できます。

TiDBクラスタに手動バックアップを適用するには、次の手順を実行します。

1.  クラスタの[**バックアップ**]タブに移動します。

2.  右上の[**手動]**をクリックします。

3.  **名前**を入力します。

4.  [**確認]**をクリックします。次に、クラスタデータがバックアップされます。

### バックアップファイルを削除する {#delete-backup-files}

既存のバックアップファイルを削除するには、次の手順を実行します。

1.  クラスタの[**バックアップ**]タブに移動します。

2.  削除するバックアップファイルの[**削除]**をクリックします。

### バックアップのベストプラクティス {#best-practices-for-backup}

-   ビジネスへの影響を最小限に抑えるために、クラスタのアイドル時にバックアップ操作を実行することをお勧めします。
-   データのインポート中、またはクラスタのスケーリング中は、手動バックアップを実行しないでください。
-   クラスタを削除した後、既存の手動バックアップファイルは、手動で削除するか、アカウントが閉鎖されるまで保持されます。自動バックアップファイルは、クラスタの削除日から7日間保持されます。それに応じてバックアップファイルを削除する必要があります。

## 戻す {#restore}

TiDB Cloudは、次の2種類のデータ復元を提供します。

-   バックアップデータを新しいクラスタに復元する
-   ごみ箱から削除されたクラスタを復元する

### データを新しいクラスタに復元する {#restore-data-to-a-new-cluster}

TiDBクラスタデータをバックアップから新しいクラスタに復元するには、次の手順を実行します。

1.  クラスタの[**バックアップ**]タブに移動します。

2.  リストから既存のバックアップを選択し、[**復元]**をクリックします。

3.  [**復元]**ウィンドウで、必要に応じて次の変更を行います。

    -   クラスタのポート番号を更新します。
    -   クラスタのノードサイズ、ノード数、およびストレージサイズを増やします。

4.  [**確認]**をクリックします。

    クラスタの復元プロセスが開始され、[**セキュリティクイックスタート**]ダイアログボックスが表示されます。

5.  [**セキュリティクイックスタート**]ダイアログボックスで、ルートパスワードと許可されたIPアドレスをクラスタに接続するように設定し、[<strong>適用</strong>]をクリックします。

### 削除したクラスタを復元する {#restore-a-deleted-cluster}

ごみ箱から削除されたクラスタを復元するには、次の手順を実行します。

1.  TiDB Cloudコンソールで、ターゲットプロジェクトに移動し、[**ごみ箱**]タブをクリックします。

2.  復元するクラスタを見つけて、[**アクション**]列の[<strong>バックアップ</strong>]をクリックします。

3.  目的のバックアップ時間を見つけて、[**復元]**をクリックします。

4.  [**復元]**ウィンドウで、必要に応じて次の変更を行います。

    -   クラスタのポート番号を更新します。
    -   クラスタのノードサイズ、ノード数、およびストレージサイズを増やします。

5.  [**確認]**をクリックします。

    クラスタの復元プロセスが開始され、[**セキュリティクイックスタート**]ダイアログボックスが表示されます。

6.  [**セキュリティクイックスタート**]ダイアログボックスで、ルートパスワードとクラスタへの接続を許可するIPアドレスを設定し、[<strong>適用</strong>]をクリックします。
