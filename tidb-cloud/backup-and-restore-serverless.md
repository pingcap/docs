---
title: Back Up and Restore Data on TiDB Cloud Starter or Essential
summary: TiDB Cloud Starter またはTiDB Cloud Essential クラスターをバックアップおよび復元する方法を学習します。
aliases: ['/tidbcloud/restore-deleted-tidb-cluster']
---

# TiDB Cloud StarterまたはEssentialでデータをバックアップおよび復元する {#back-up-and-restore-data-on-tidb-cloud-starter-or-essential}

このドキュメントでは、TiDB Cloud Starter またはTiDB Cloud Essential クラスターでデータをバックアップおよび復元する方法について説明します。

> **ヒント：**
>
> TiDB Cloud Dedicated クラスターでデータをバックアップおよび復元する方法については、 [TiDB Cloud専用データのバックアップと復元](/tidb-cloud/backup-and-restore.md)参照してください。

## バックアップページをビュー {#view-the-backup-page}

1.  [**クラスター**](https://tidbcloud.com/project/clusters)ページで、ターゲット クラスターの名前をクリックして、概要ページに移動します。

    > **ヒント：**
    >
    > 左上隅のコンボ ボックスを使用して、組織、プロジェクト、クラスターを切り替えることができます。

2.  左側のナビゲーション ペインで、 **[データ]** &gt; **[バックアップ] を**クリックします。

## 自動バックアップ {#automatic-backups}

TiDB Cloud はクラスター データを自動的にバックアップし、バックアップ スナップショットからデータを復元して、災害発生時のデータ損失を最小限に抑えることができます。

### バックアップ設定について学ぶ {#learn-about-the-backup-setting}

自動バックアップ設定は、次の表に示すように、 TiDB Cloud Starter クラスターとTiDB Cloud Essential クラスター間で異なります。

| バックアップ設定   | TiDB Cloudスターター クラスター | TiDB Cloud Essential クラスター |
| ---------- | --------------------- | -------------------------- |
| バックアップサイクル | 毎日                    | 毎日                         |
| バックアップの保持  | 1日                    | 14日間                       |
| バックアップ時間   | 固定時間                  | 設定可能                       |

-   **バックアップ サイクル**は、バックアップが実行される頻度です。

-   **バックアップ保持**期間とは、バックアップが保持される期間です。期限切れのバックアップは復元できません。

-   **バックアップ時間は、**バックアップのスケジュールが開始される時間です。最終的なバックアップ時間は、設定されたバックアップ時間より遅くなる場合があることに注意してください。

    -   TiDB Cloud Starter クラスター: バックアップ時間はランダムに固定されます。
    -   TiDB Cloud Essentialクラスター：バックアップ間隔を30分ごとに設定できます。デフォルト値はランダムに固定された時間です。

### バックアップ設定を構成する {#configure-the-backup-setting}

TiDB Cloud Essential クラスターのバックアップ時間を設定するには、次の手順を実行します。

1.  クラスターの[**バックアップ**](#view-the-backup-page)ページに移動します。

2.  **「バックアップ設定」**をクリックします。 **「バックアップ設定」**ウィンドウが開き、必要に応じて自動バックアップ設定を構成できます。

3.  **[バックアップ時刻]**で、毎日のクラスター バックアップの開始時刻をスケジュールします。

4.  **［確認］**をクリックします。

## 復元する {#restore}

TiDB Cloudクラスターは、偶発的な損失や破損が発生した場合にデータを回復するのに役立つ復元機能を提供します。

### 復元モード {#restore-mode}

TiDB Cloud は、クラスターのスナップショット復元とポイントインタイム復元をサポートします。

-   **スナップショットの復元**: 特定のバックアップ スナップショットからクラスターを復元します。

-   **ポイントインタイム リストア (ベータ)** : クラスターを特定の時点に復元します。

    -   TiDB Cloud Starter クラスター: サポートされていません。
    -   TiDB Cloud Essential クラスター: 過去 14 日以内の任意の時点に復元しますが、クラスターの作成時刻より前、または現在の時刻から 1 分後の時点には復元しません。

### 復元先 {#restore-destination}

TiDB Cloud は、インプレース復元と新しいクラスターへの復元をサポートしています。

**インプレースリストア**

現在のクラスタに復元すると、既存のデータが上書きされます。以下の点にご注意ください。

-   復元が開始されると、既存の接続は終了します。
-   復元プロセス中はクラスターは使用できなくなり、新しい接続はブロックされます。
-   復元はスキーマ`mysql`内のテーブルに影響します。ユーザー資格情報、権限、またはシステム変数への変更は、バックアップ時の状態に戻ります。

**新しいクラスターに復元する**

新しいクラスターを作成し、復元します。以下の点に注意してください。

-   ソース クラスターのユーザー資格情報と権限は新しいクラスターに復元されません。

### 復元タイムアウト {#restore-timeout}

復元プロセスは通常数分以内に完了します。復元に3時間以上かかる場合は、自動的にキャンセルされます。キャンセルされた復元の結果は、復元先によって異なります。

-   **インプレース復元**: クラスターのステータスが**「復元中」**から**「使用可能」**に変わり、クラスターにアクセスできるようになります。
-   **新しいクラスターに復元**: 新しいクラスターは削除され、ソース クラスターは変更されません。

復元をキャンセルした後にデータが破損し、回復できない場合は、 [TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md)連絡してサポートを受けてください。

### 復元を実行する {#perform-the-restore}

TiDB Cloudクラスターを復元するには、次の手順に従います。

1.  クラスターの[**バックアップ**](#view-the-backup-page)ページに移動します。

2.  **「復元」**をクリックします。設定ウィンドウが表示されます。

3.  **復元モード**では、特定のバックアップまたは任意の時点から復元することを選択できます。

    <SimpleTab>
     <div label="Snapshot Restore">

    選択したバックアップ スナップショットから復元するには、次の手順を実行します。

    1.  **スナップショットの復元を**クリックします。
    2.  復元するバックアップ スナップショットを選択します。

    </div>
     <div label="Point-in-Time Restore">

    TiDB Cloud Essential クラスターを特定の時点に復元するには、次の手順を実行します。

    1.  **ポイントインタイム復元を**クリックします。
    2.  復元したい日時を選択します。

    </div>
     </SimpleTab>

4.  **[宛先]**では、新しいクラスターに復元するか、インプレースで復元するかを選択できます。

    <SimpleTab>
     <div label="Restore to a new cluster">

    新しいクラスターに復元するには、次の手順を実行します。

    1.  **「新しいクラスタに復元」を**クリックします。
    2.  新しいクラスターの名前を入力します。
    3.  新しいクラスターのクラスター プランを選択します。

        -   TiDB Cloud Starter クラスターを選択し、 [無料割り当て](/tidb-cloud/select-cluster-tier.md#usage-quota)より多くのリソースが必要な場合は、月間使用制限を設定します。
        -   TiDB Cloud Essential クラスターを選択した場合は、最小 RCU と最大 RCU を設定し、必要に応じて詳細設定を構成します。

    </div>
     <div label="Restore in-place">

    インプレース復元するには、 **[インプレース復元] を**クリックします。

    </div>
     </SimpleTab>

5.  復元プロセスを開始するには、 **「復元」を**クリックします。

復元プロセスが開始されると、クラスターのステータスが**「復元中」**に変わります。復元が完了してステータスが「使用可能」に変わるまで、クラスターは**利用**できません。

## 制限事項 {#limitations}

-   TiFlashレプリカが有効になっている場合、データをTiFlashで再構築する必要があるため、復元後に一定期間使用できなくなります。
-   TiDB Cloud Starter およびTiDB Cloud Essential クラスターでは手動バックアップはサポートされていません。
-   1 TiBを超えるデータを持つクラスターは、デフォルトでは新しいクラスターへの復元をサポートしていません。より大きなデータセットについては、 [TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md)お問い合わせください。
