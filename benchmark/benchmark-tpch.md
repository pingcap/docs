---
title: TiDB TPC-H 50G Performance Test Report V2.0
---

# TiDB TPC-H 50G パフォーマンス テスト レポート {#tidb-tpc-h-50g-performance-test-report}

## テストの目的 {#test-purpose}

このテストの目的は、OLAP シナリオにおける TiDB 1.0 と TiDB 2.0 のパフォーマンスを比較することです。

> **注記：**
>
> テスト環境が異なると、テスト結果も異なる場合があります。

## テスト環境 {#test-environment}

### マシン情報 {#machine-information}

システムインフォメーション：

| マシンIP        | オペレーションシステム           | カーネルのバージョン                 | ファイルシステムの種類 |
| ------------ | --------------------- | -------------------------- | ----------- |
| 172.16.31.2  | Ubuntu 17.10 64ビット    | 4.13.0-16-ジェネリック           | 内線4         |
| 172.16.31.3  | Ubuntu 17.10 64ビット    | 4.13.0-16-ジェネリック           | 内線4         |
| 172.16.31.4  | Ubuntu 17.10 64ビット    | 4.13.0-16-ジェネリック           | 内線4         |
| 172.16.31.6  | CentOS 7.4.1708 64ビット | 3.10.0-693.11.6.el7.x86_64 | 内線4         |
| 172.16.31.8  | CentOS 7.4.1708 64ビット | 3.10.0-693.11.6.el7.x86_64 | 内線4         |
| 172.16.31.10 | CentOS 7.4.1708 64ビット | 3.10.0-693.11.6.el7.x86_64 | 内線4         |

ハードウェア情報:

| タイプ       | 名前                                                |
| --------- | ------------------------------------------------- |
| CPU       | 40 vCPU、Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz |
| ラム        | 128GB、16GB RDIMM * 8、2400MT/s、デュアルチャネル、x8 ビット幅    |
| ディスク      | インテル P4500 4T SSD*2                               |
| ネットワークカード | 10ギガビットイーサネット                                     |

### TPC-H {#tpc-h}

[tidbベンチ/tpch](https://github.com/pingcap/tidb-bench/tree/master/tpch)

### クラスタトポロジ {#cluster-topology}

| マシンIP        | デプロイメントインスタンス |
| ------------ | ------------- |
| 172.16.31.2  | TiKV*2        |
| 172.16.31.3  | TiKV*2        |
| 172.16.31.6  | TiKV*2        |
| 172.16.31.8  | TiKV*2        |
| 172.16.31.10 | TiKV*2        |
| 172.16.31.10 | PD※1          |
| 172.16.31.4  | TiDB*1        |

### 対応するTiDBバージョン情報 {#corresponding-tidb-version-information}

TiDB 1.0:

| 成分   | バージョン  | コミットハッシュ                                 |
| ---- | ------ | ---------------------------------------- |
| TiDB | v1.0.9 | 4c7ee3580cd0a69319b2c0c08abdc59900df7344 |
| TiKV | v1.0.8 | 2bb923a4cd23dbf68f0d16169fd526dc5c1a9f4a |
| PD   | v1.0.8 | 137fa734472a76c509fbfd9cb9bc6d0dc804a3b7 |

TiDB 2.0:

| 成分   | バージョン       | コミットハッシュ                                 |
| ---- | ----------- | ---------------------------------------- |
| TiDB | v2.0.0-rc.6 | 82d35f1b7f9047c478f4e1e82aa0002abc8107e7 |
| TiKV | v2.0.0-rc.6 | 8bd5c54966c6ef42578a27519bce4915c5b0c81f |
| PD   | v2.0.0-rc.6 | 9b824d288126173a61ce7d51a71fc4cb12360201 |

## テスト結果 {#test-result}

| クエリID | TiDB 2.0 | TiDB 1.0 |
| ----- | -------- | -------- |
| 1     | 33.915秒  | 215.305秒 |
| 2     | 25.575秒  | ナン       |
| 3     | 59.631秒  | 196.003秒 |
| 4     | 30.234秒  | 249.919秒 |
| 5     | 31.666秒  | OOM      |
| 6     | 13.111秒  | 118.709秒 |
| 7     | 31.710秒  | OOM      |
| 8     | 31.734秒  | 800.546秒 |
| 9     | 34.211秒  | 630.639秒 |
| 10    | 30.774秒  | 133.547秒 |
| 11    | 27.692秒  | 78.026秒  |
| 12    | 27.962秒  | 124.641秒 |
| 13    | 27.676秒  | 174.695秒 |
| 14    | 19.676秒  | 110.602秒 |
| 15    | NaN      | ナン       |
| 16    | 24.890秒  | 40.529秒  |
| 17    | 245.796秒 | NaN      |
| 18    | 91.256秒  | OOM      |
| 19    | 37.615秒  | NaN      |
| 20    | 44.167秒  | 212.201秒 |
| 21    | 31.466秒  | OOM      |
| 22    | 31.539秒  | 125.471秒 |

![TPC-H Query Result](/media/tpch-query-result.png)

注意すべきこと：

-   上の図では、オレンジ色のバーはリリース 1.0 のクエリ結果を表し、青色のバーはリリース 2.0 のクエリ結果を表します。 Y 軸はクエリの処理時間を秒単位で表し、短いほど速くなります。
-   VIEW は現在 TiDB 1.0 または 2.0 のどちらでもサポートされていないため、クエリ 15 には「NaN」のタグが付けられています。将来のリリースでは VIEW サポートを提供する予定です。
-   TiDB 1.0 列のクエリ 2、17、および 19 には、TiDB 1.0 がこれらのクエリの結果を返さなかったため、「NaN」のタグが付けられています。
-   TiDB 1.0 列のクエリ 5、7、18、および 21 には、メモリ消費量が多すぎるため「OOM」のタグが付けられています。
