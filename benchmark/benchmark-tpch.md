---
title: TiDB TPC-H 50G Performance Test Report V2.0
---

# TiDBTPC-H50Gパフォーマンステストレポート {#tidb-tpc-h-50g-performance-test-report}

## テスト目的 {#test-purpose}

このテストは、OLAPシナリオでのTiDB1.0とTiDB2.0のパフォーマンスを比較することを目的としています。

> **ノート：**
>
> テスト環境が異なれば、テスト結果も異なる可能性があります。

## テスト環境 {#test-environment}

### 機械情報 {#machine-information}

システムインフォメーション：

| マシンIP        | オペレーションシステム         | カーネルバージョン                  | ファイルシステムの種類 |
| ------------ | ------------------- | -------------------------- | ----------- |
| 172.16.31.2  | Ubuntu17.1064ビット    | 4.13.0-16-ジェネリック           | ext4        |
| 172.16.31.3  | Ubuntu17.1064ビット    | 4.13.0-16-ジェネリック           | ext4        |
| 172.16.31.4  | Ubuntu17.1064ビット    | 4.13.0-16-ジェネリック           | ext4        |
| 172.16.31.6  | CentOS7.4.170864ビット | 3.10.0-693.11.6.el7.x86_64 | ext4        |
| 172.16.31.8  | CentOS7.4.170864ビット | 3.10.0-693.11.6.el7.x86_64 | ext4        |
| 172.16.31.10 | CentOS7.4.170864ビット | 3.10.0-693.11.6.el7.x86_64 | ext4        |

ハードウェア情報：

| タイプ       | 名前                                              |
| --------- | ----------------------------------------------- |
| CPU       | 40 vCPU、Intel（R）Xeon（R）CPU E5-2630 v4 @ 2.20GHz |
| 羊         | 128GB、16GB RDIMM * 8、2400MT / s、デュアルチャネル、x8ビット幅 |
| ディスク      | Intel P4500 4T SSD * 2                          |
| ネットワークカード | 10ギガビットイーサネット                                   |

### TPC-H {#tpc-h}

[tidb-bench / tpch](https://github.com/pingcap/tidb-bench/tree/master/tpch)

### クラスタートポロジー {#cluster-topology}

| マシンIP        | デプロイメントインスタンス |
| ------------ | ------------- |
| 172.16.31.2  | TiKV * 2      |
| 172.16.31.3  | TiKV * 2      |
| 172.16.31.6  | TiKV * 2      |
| 172.16.31.8  | TiKV * 2      |
| 172.16.31.10 | TiKV * 2      |
| 172.16.31.10 | PD * 1        |
| 172.16.31.4  | TiDB * 1      |

### 対応するTiDBバージョン情報 {#corresponding-tidb-version-information}

TiDB 1.0：

| 成分   | バージョン  | ハッシュをコミットする                              |
| ---- | ------ | ---------------------------------------- |
| TiDB | v1.0.9 | 4c7ee3580cd0a69319b2c0c08abdc59900df7344 |
| TiKV | v1.0.8 | 2bb923a4cd23dbf68f0d16169fd526dc5c1a9f4a |
| PD   | v1.0.8 | 137fa734472a76c509fbfd9cb9bc6d0dc804a3b7 |

TiDB 2.0：

| 成分   | バージョン       | ハッシュをコミットする                              |
| ---- | ----------- | ---------------------------------------- |
| TiDB | v2.0.0-rc.6 | 82d35f1b7f9047c478f4e1e82aa0002abc8107e7 |
| TiKV | v2.0.0-rc.6 | 8bd5c54966c6ef42578a27519bce4915c5b0c81f |
| PD   | v2.0.0-rc.6 | 9b824d288126173a61ce7d51a71fc4cb12360201 |

## テスト結果 {#test-result}

| クエリID | TiDB 2.0 | TiDB 1.0 |
| ----- | -------- | -------- |
| 1     | 33.915s  | 215.305秒 |
| 2     | 25.575秒  | ナン       |
| 3     | 59.631秒  | 196.003s |
| 4     | 30.234秒  | 249.919秒 |
| 5     | 31.666s  | OOM      |
| 6     | 13.111s  | 118.709s |
| 7     | 31.710秒  | OOM      |
| 8     | 31.734s  | 800.546s |
| 9     | 34.211秒  | 630.639s |
| 10    | 30.774秒  | 133.547s |
| 11    | 27.692秒  | 78.026s  |
| 12    | 27.962秒  | 124.641秒 |
| 13    | 27.676s  | 174.695秒 |
| 14    | 19.676s  | 110.602秒 |
| 15    | NaN      | ナン       |
| 16    | 24.890s  | 40.529秒  |
| 17    | 245.796秒 | NaN      |
| 18    | 91.256秒  | OOM      |
| 19    | 37.615秒  | NaN      |
| 20    | 44.167秒  | 212.201s |
| 21    | 31.466s  | OOM      |
| 22    | 31.539s  | 125.471s |

![TPC-H Query Result](/media/tpch-query-result.png)

注意すべきこと：

-   上の図で、オレンジ色のバーはリリース1.0のクエリ結果を表し、青いバーはリリース2.0のクエリ結果を表します。 y軸はクエリの処理時間を秒単位で表し、短いほど速くなります。
-   VIEWは現在TiDB1.0または2.0でサポートされていないため、クエリ15は「NaN」でタグ付けされています。将来のリリースでVIEWサポートを提供する予定です。
-   TiDB 1.0列のクエリ2、17、および19は、「NaN」でタグ付けされています。これは、TiDB1.0がこれらのクエリの結果を返さなかったためです。
-   TiDB 1.0列のクエリ5、7、18、および21は、メモリ消費量が多すぎるため、「OOM」のタグが付けられています。
