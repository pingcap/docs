---
title: TiDB Sysbench Performance Test Report -- v2.0.0 vs. v1.0.0
---

# TiDB Sysbench パフォーマンス テスト レポート -- v2.0.0 と v1.0.0 {#tidb-sysbench-performance-test-report-v2-0-0-vs-v1-0-0}

## テストの目的 {#test-purpose}

このテストは、TiDB 1.0 と TiDB 2.0 のパフォーマンスを比較することを目的としています。

## テストバージョン、時間、場所 {#test-version-time-and-place}

TiDB バージョン: v1.0.8 と v2.0.0-rc6

時期：2018年4月

場所：北京、中国

## テスト環境 {#test-environment}

圧接機

| タイプ  | 名前                                                |
| ---- | ------------------------------------------------- |
| OS   | Linux (CentOS 7.3.1611)                           |
| CPU  | 40 vCPU、Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz |
| ラム   | 128GB                                             |
| ディスク | Optane 500GB SSD*1                                |

## テスト計画 {#test-plan}

### TiDB のバージョン情報 {#tidb-version-information}

### v1.0.8 {#v1-0-8}

| 成分   | GitHash                                  |
| ---- | ---------------------------------------- |
| TiDB | 571f0bbd28a0b8155a5ee831992c986b90d21ab7 |
| TiKV | 4ef5889947019e3cb55cc744f487aa63b42540e7 |
| PD   | 776bcd940b71d295a2c7ed762582bc3aff7d3c0e |

### v2.0.0-rc6 {#v2-0-0-rc6}

|  成分  |                  GitHash                 |
| :--: | :--------------------------------------: |
| TiDB | 82d35f1b7f9047c478f4e1e82aa0002abc8107e7 |
| TiKV | 7ed4f6a91f92cad5cd5323aaebe7d9f04b77cc79 |
|  PD  | 2c8e7d7e33b38e457169ce5dfb2f461fced82d65 |

### TiKVパラメータ設定 {#tikv-parameter-configuration}

-   v1.0.8

        sync-log = false
        grpc-concurrency = 8
        grpc-raft-conn-num = 24

-   v2.0.0-rc6

        sync-log = false
        grpc-concurrency = 8
        grpc-raft-conn-num = 24
        use-delete-range: false

### クラスタトポロジ {#cluster-topology}

| マシンIP       | デプロイメントインスタンス           |
| ----------- | ----------------------- |
| 172.16.21.1 | 1 *tdb 1* pd 1*sysbench |
| 172.16.21.2 | 1 *tdb 1* pd 1*sysbench |
| 172.16.21.3 | 1 *tdb 1* pd 1*sysbench |
| 172.16.11.4 | 1 *ティクブ                 |
| 172.16.11.5 | 1 *ティクブ                 |
| 172.16.11.6 | 1 *ティクブ                 |
| 172.16.11.7 | 1 *ティクブ                 |
| 172.16.11.8 | 1 *ティクブ                 |
| 172.16.11.9 | 1 *ティクブ                 |

## テスト結果 {#test-result}

### 標準<code>Select</code>テスト {#standard-code-select-code-test}

|    バージョン   | テーブル数 | テーブルサイズ | システムベンチのスレッド |   QPS  |    レイテンシー (平均/.95)    |
| :--------: | :---: | :-----: | :----------: | :----: | :-------------------: |
| v2.0.0-rc6 |   32  |    千万   |     128*3    | 201936 |  1.9033ミリ秒/5.67667ミリ秒 |
| v2.0.0-rc6 |   32  |    千万   |     256*3    | 208130 | 3.69333ミリ秒/8.90333ミリ秒 |
| v2.0.0-rc6 |   32  |    千万   |     512*3    | 211788 |  7.23333ミリ秒/15.59ミリ秒  |
| v2.0.0-rc6 |   32  |    千万   |    1024*3    | 212868 | 14.5933ミリ秒/43.2133ミリ秒 |
|   v1.0.8   |   32  |    千万   |     128*3    | 188686 |   2.03667ミリ秒/5.99ミリ秒  |
|   v1.0.8   |   32  |    千万   |     256*3    | 195090 |    3.94ミリ秒/9.12ミリ秒    |
|   v1.0.8   |   32  |    千万   |     512*3    | 203012 | 7.57333ミリ秒/15.3733ミリ秒 |
|   v1.0.8   |   32  |    千万   |    1024*3    | 205932 | 14.9267ミリ秒/40.7633ミリ秒 |

上記の統計によると、TiDB 2.0 GA の`Select`クエリ パフォーマンスは、TiDB 1.0 GA に比べて最大で 10% 程度向上しています。

### 標準OLTPテスト {#standard-oltp-test}

|    バージョン   | テーブル数 | テーブルサイズ | システムベンチのスレッド |    TPS   |    QPS   |    レイテンシー (平均/.95)    |
| :--------: | :---: | :-----: | :----------: | :------: | :------: | :-------------------: |
| v2.0.0-rc6 |   32  |    千万   |     128*3    |  5404.22 | 108084.4 |   87.2033ミリ秒/110ミリ秒   |
| v2.0.0-rc6 |   32  |    千万   |     256*3    | 5578.165 | 111563.3 | 167.673ミリ秒/275.623ミリ秒 |
| v2.0.0-rc6 |   32  |    千万   |     512*3    | 5874.045 | 117480.9 | 315.083ミリ秒/674.017ミリ秒 |
| v2.0.0-rc6 |   32  |    千万   |    1024*3    |  6290.7  |  125814  | 529.183ミリ秒/857.007ミリ秒 |
|   v1.0.8   |   32  |    千万   |     128*3    |  5523.91 |  110478  |  69.53ミリ秒/88.6333ミリ秒  |
|   v1.0.8   |   32  |    千万   |     256*3    |  5969.43 |  119389  |  128.63ミリ秒/162.58ミリ秒  |
|   v1.0.8   |   32  |    千万   |     512*3    |  6308.93 |  126179  | 243.543ミリ秒/310.913ミリ秒 |
|   v1.0.8   |   32  |    千万   |    1024*3    |  6444.25 |  128885  | 476.787ミリ秒/635.143ミリ秒 |

上記の統計によると、TiDB 2.0 GA と TiDB 1.0 GA の OLTP パフォーマンスはほぼ同じです。

### 標準<code>Insert</code>テスト {#standard-code-insert-code-test}

|    バージョン   | テーブル数 | テーブルサイズ | システムベンチのスレッド |   QPS   |    レイテンシー (平均/.95)    |
| :--------: | :---: | :-----: | :----------: | :-----: | :-------------------: |
| v2.0.0-rc6 |   32  |    千万   |     128*3    | 31707.5 |  12.11ミリ秒/21.1167ミリ秒  |
| v2.0.0-rc6 |   32  |    千万   |     256*3    | 38741.2 |  19.8233ミリ秒/39.65ミリ秒  |
| v2.0.0-rc6 |   32  |    千万   |     512*3    | 45136.8 |  34.0267ミリ秒/66.84ミリ秒  |
| v2.0.0-rc6 |   32  |    千万   |    1024*3    |  48667  |  63.1167ミリ秒/121.08ミリ秒 |
|   v1.0.8   |   32  |    千万   |     128*3    | 31125.7 |  12.3367ミリ秒/19.89ミリ秒  |
|   v1.0.8   |   32  |    千万   |     256*3    |  36800  | 20.8667ミリ秒/35.3767ミリ秒 |
|   v1.0.8   |   32  |    千万   |     512*3    |  44123  |  34.8067ミリ秒/63.32ミリ秒  |
|   v1.0.8   |   32  |    千万   |    1024*3    |  48496  |  63.3333ミリ秒/118.92ミリ秒 |

上記の統計によると、TiDB 2.0 GA の`Insert`クエリ パフォーマンスは、TiDB 1.0 GA よりもわずかに向上しています。
